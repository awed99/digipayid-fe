!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="9607eda3-8732-4c76-9006-0a938587c027",e._sentryDebugIdIdentifier="sentry-dbid-9607eda3-8732-4c76-9006-0a938587c027")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{53829:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return n(75588)}])},73821:function(e,a,n){"use strict";n.d(a,{Z:function(){return f}});var r=n(87462),t=n(63366),i=n(67294),l=n(92827),s=n(58510),o=n(89262),d=n(36522),u=n(62191),c=n(1977),m=n(8027);function h(e){return(0,m.ZP)("MuiCard",e)}(0,c.Z)("MuiCard",["root"]);var p=n(85893);let x=["className","raised"],g=e=>{let{classes:a}=e;return(0,s.Z)({root:["root"]},h,a)},v=(0,o.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,a)=>a.root})(()=>({overflow:"hidden"}));var f=i.forwardRef(function(e,a){let n=(0,d.i)({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=n,o=(0,t.Z)(n,x),u=(0,r.Z)({},n,{raised:s}),c=g(u);return(0,p.jsx)(v,(0,r.Z)({className:(0,l.Z)(c.root,i),elevation:s?8:void 0,ref:a,ownerState:u},o))})},75588:function(e,a,n){"use strict";n.r(a);var r=n(85893),t=n(67294),i=n(41664),l=n.n(i),s=n(11163),o=n(52628),d=n.n(o),u=n(30158),c=n(34853),m=n(16310),h=n(23241),p=n(98115),x=n(2833),g=n(13425),v=n(91093),f=n(16268),y=n(14440),j=n(98163),Z=n(73821),_=n(19203),w=n(80646),b=n(34934),k=n(59505),C=n(6799),S=n(86374),T=n(33367),A=n(22021),P=n(80888),O=n(89262),E=n(49360),N=n(14e3),z=n(94246),D=n(19607),I=n(58811),M=n(35454),K=n(88881),W=n(28329);let F=(0,O.ZP)(Z.Z)(e=>{let{theme:a}=e;return{[a.breakpoints.up("sm")]:{width:"28rem"}}}),R=(0,O.ZP)("a")(e=>{let{theme:a}=e;return{cursor:"pointer",fontSize:"0.875rem",textDecoration:"none",color:a.palette.primary.main,root:{"&[disabled]":{color:"grey",cursor:"default",textDecoration:"none","&:hover":{textDecoration:"none"}}}}}),q=(0,O.ZP)(S.Z)(e=>{let{theme:a}=e;return{marginTop:a.spacing(1.5),marginBottom:a.spacing(4),"& .MuiFormControlLabel-label":{fontSize:"0.875rem",color:a.palette.text.secondary}}}),B=()=>{let e=m.Ry().shape({username:m.Z_().required(),merchant_name:m.Z_().required(),merchant_address:m.Z_().required(),merchant_wa:m.Rx().required(),email:m.Z_().email().required(),password:m.Z_().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!?"'@#\$%\^&\*.,])(?=.{8,})/,"Min 8 Chars, Uppercase, Lowercase, Number and Special Character").required()}),[a,n]=(0,t.useState)(0),[i,o]=(0,t.useState)(!1),[Z,S]=(0,t.useState)(!1),[O,K]=(0,t.useState)(!1),[B,L]=(0,t.useState)(),[U,H]=(0,t.useState)(0),[X,G]=(0,t.useState)(!1),[J,Q]=(0,t.useState)(!1),[V,Y]=(0,t.useState)(""),[$,ee]=(0,t.useState)(""),[ea,en]=(0,t.useState)(!1),[er,et]=(0,t.useState)({open:!1,type:"primary",message:""}),[ei,el]=(0,t.useState)({username:"",merchant_name:"",merchant_address:"",merchant_wa:"",email:"",password:""});(0,E.Z)();let es=(0,s.useRouter)(),eo=async()=>{var e;let a="/api/check-auth",n=await (0,p.Hl)(a);await fetch("".concat(a),{method:"POST",headers:{"x-signature":null==n?void 0:n.signature,"x-timestamp":null==n?void 0:n.timestamp},body:JSON.stringify({email:null===(e=JSON.parse(localStorage.getItem("data-module")))||void 0===e?void 0:e.email})}).then(e=>e.json()).then(e=>{var a,n;(null==e?void 0:null===(a=e.auth)||void 0===a?void 0:a.user)&&(null==e||null===(n=e.auth)||void 0===n||n.token)}).catch(()=>!1)};(0,t.useEffect)(()=>{(0,g.r)("username","",ei,el,e,L)},[]);let ed=async a=>{if(en(!0),d()(B).map(e=>{if(e){et({open:!0,type:"error",message:"Error"==d()(B)[0]?"Fill all required fields!":d()(B)[0]}),en(!1);return}}),!i)return et({open:!0,type:"error",message:"Captcha is required!"}),en(!1),!1;if(U<.5)return et({open:!0,type:"error",message:"High risk action detected!"}),en(!1),!1;{let n=await (0,x.eD)(a,e,ei).catch(()=>en(!1));return et({open:!0,type:(null==n?void 0:n.code)>0?"error":"primary",message:(null==n?void 0:n.code)>0?null==n?void 0:n.error:null==n?void 0:n.message}),en(!1),(null==n?void 0:n.code)<1&&G(!0),!1}},eu=async e=>{en(!0);let a={};"email"==e?a={type:"register_otp_email",email:ei.email,otp_email:V}:"wa"==e&&(a={type:"register_otp_wa",merchant_wa:ei.merchant_wa,otp_wa:$});let n=await (0,x.up)(a).catch(()=>en(!1));et({open:!0,type:(null==n?void 0:n.code)>0?"error":"primary",message:(null==n?void 0:n.code)>0?null==n?void 0:n.error:null==n?void 0:n.message}),en(!1),(null==n?void 0:n.code)<1&&("email"==e?(G(!1),Q(!0)):(G(!1),Q(!1),es.push("/auth")))},ec=async e=>{n(60),en(!0);let a={};"email"==e?a={type:"register_otp_email",email:ei.email}:"wa"==e&&(a={type:"register_otp_wa",merchant_wa:ei.merchant_wa});let r=await (0,x.DH)(a).catch(()=>en(!1));et({open:!0,type:(null==r?void 0:r.code)>0?"error":"primary",message:(null==r?void 0:r.code)>0?null==r?void 0:r.error:null==r?void 0:r.message}),en(!1)};return(0,t.useEffect)(()=>{fetch("https://recaptchaenterprise.googleapis.com/v1/projects/telp-304809/assessments?key=".concat("AIzaSyAkYIUIohTKbGl6cNzgfhP50tzaFd74gK0"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({event:{token:i,expectedAction:"USER_ACTION",siteKey:"6LdDoq4nAAAAAMEthi6CA1Xj-N0sLQCxGya6xcT3"}})}).then(e=>e.json()).then(async e=>{var a;H(null==e?void 0:null===(a=e.riskAnalysis)||void 0===a?void 0:a.score)})},[i]),(0,t.useEffect)(()=>{a>0&&setTimeout(()=>n(a-1),1e3)},[a]),(0,t.useLayoutEffect)(()=>{eo()},[]),(0,r.jsxs)(y.Z,{className:"content-center",children:[(0,r.jsx)(F,{sx:{zIndex:1},children:(0,r.jsxs)(_.Z,{sx:{padding:e=>"".concat(e.spacing(12,9,7)," !important")},children:[(0,r.jsx)(y.Z,{sx:{mb:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("img",{src:"/images/logo.png",width:70})}),(0,r.jsxs)(y.Z,{sx:{mb:6},children:[(0,r.jsxs)(z.Z,{variant:"h5",sx:{fontWeight:600,marginBottom:1.5},children:["Register ",M.Z.templateName," \uD83D\uDC4B\uD83C\uDFFB"]}),(0,r.jsx)(z.Z,{variant:"body2",children:"Register dan rasakan pengalaman kemudahannya."})]}),(0,r.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>e.preventDefault(),children:[(0,r.jsx)(N.Z,{autoFocus:!0,fullWidth:!0,size:"small",id:"username",label:"Nama Lengkap",sx:{marginBottom:4},onChange:a=>(0,g.r)("username",a,ei,el,e,L),value:null==ei?void 0:ei.username,error:null==B?void 0:B.username,helperText:null==B?void 0:B.username}),(0,r.jsx)(N.Z,{autoFocus:!0,fullWidth:!0,size:"small",id:"merchant_name",label:"Nama Toko",sx:{marginBottom:4},onChange:a=>(0,g.r)("merchant_name",a,ei,el,e,L),value:null==ei?void 0:ei.merchant_name,error:null==B?void 0:B.merchant_name,helperText:null==B?void 0:B.merchant_name}),(0,r.jsx)(N.Z,{autoFocus:!0,fullWidth:!0,size:"small",id:"merchant_address",label:"Alamat Toko",sx:{marginBottom:4},onChange:a=>(0,g.r)("merchant_address",a,ei,el,e,L),value:null==ei?void 0:ei.merchant_address,error:null==B?void 0:B.merchant_address,helperText:null==B?void 0:B.merchant_address}),(0,r.jsx)(k.Z,{}),(0,r.jsx)(N.Z,{autoFocus:!0,fullWidth:!0,size:"small",id:"merchant_wa",label:"No. Whatsapp",sx:{marginBottom:4},onChange:a=>(0,g.r)("merchant_wa",a,ei,el,e,L),value:null==ei?void 0:ei.merchant_wa,error:null==B?void 0:B.merchant_wa,helperText:null==B?void 0:B.merchant_wa}),(0,r.jsx)(N.Z,{fullWidth:!0,size:"small",type:"email",label:"Email",sx:{marginBottom:4},onChange:a=>(0,g.r)("email",a,ei,el,e,L),value:null==ei?void 0:ei.email,error:null==B?void 0:B.email,helperText:null==B?void 0:B.email}),(0,r.jsx)(C.Z,{fullWidth:!0,children:(0,r.jsx)(N.Z,{fullWidth:!0,id:"standard-basic",label:"Password",variant:"outlined",size:"small",onChange:a=>(0,g.r)("password",a,ei,el,e,L),value:null==ei?void 0:ei.password,error:null==B?void 0:B.password,helperText:null==B?void 0:B.password,type:Z?"text":"password",InputProps:{endAdornment:(0,r.jsx)(A.Z,{position:"end",children:(0,r.jsx)(T.Z,{edge:"end",onClick:()=>S(!Z),"aria-label":"toggle password visibility",children:Z?(0,r.jsx)(I.Z,{}):(0,r.jsx)(D.Z,{})})})}})}),(0,r.jsx)(y.Z,{sx:{mb:4,mt:4,display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:(0,r.jsx)(c.Z,{sitekey:"6LdDoq4nAAAAAMEthi6CA1Xj-N0sLQCxGya6xcT3",onChange:e=>o(e)})}),(0,r.jsx)(q,{control:(0,r.jsx)(w.Z,{value:"isChecked",onChange:e=>K(!O)}),label:(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)("span",{children:"Saya menyetujui "}),(0,r.jsx)(l(),{href:"/",passHref:!0,children:(0,r.jsx)(R,{onClick:e=>K(!O),children:"syarat & ketentuan"})})]})}),(0,r.jsx)(j.Z,{disabled:!i||!O||Object.keys(B).length>0,fullWidth:!0,size:"large",type:"submit",variant:"contained",sx:{marginBottom:7},onClick:e=>ed(e),children:"Register"}),(0,r.jsxs)(y.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[(0,r.jsx)(z.Z,{variant:"body2",sx:{marginRight:2},children:"Sudah punya akun?"}),(0,r.jsx)(z.Z,{variant:"body2",children:(0,r.jsx)(l(),{passHref:!0,href:"/auth",children:(0,r.jsx)(R,{children:"Silakan Login"})})})]})]})]})}),(0,r.jsx)(W.Z,{}),(0,r.jsx)(f.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+999999},open:ea,children:(0,r.jsx)(b.Z,{color:"primary",size:100,variant:"indeterminate"})}),(0,r.jsx)(P.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:null==er?void 0:er.open,autoHideDuration:3e3,onClose:()=>et({open:!1,type:null==er?void 0:er.type,message:""}),children:(0,r.jsx)(v.Z,{variant:"filled",severity:null==er?void 0:er.type,sx:{width:"100%"},children:null==er?void 0:er.message})}),(0,r.jsxs)(h.Z,{titleModal:"Konfirmasi OTP Email",openModal:X,setOpenModal:G,handleSubmitFunction:()=>eu("email"),children:[(0,r.jsxs)(z.Z,{children:["Kode OTP Email anda sudah dikirim ke Email anda ",null==ei?void 0:ei.email,"."]}),(0,r.jsx)(z.Z,{children:"Silahkan konfirmasikan dengan memasukkan kode OTP Melalui Email."}),(0,r.jsx)(y.Z,{sx:{p:10},children:(0,r.jsx)(u.P,{length:6,value:V,onChange:e=>Y(e)})}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(z.Z,{variant:"body2",children:0==a?(0,r.jsx)(R,{onClick:e=>ec("email"),children:"Kirim Ulang Kode OTP"}):(0,r.jsxs)(R,{disabled:!0,sx:{color:"gray"},children:["Kirim Ulang Kode OTP dalam (",a,")"]})})})]}),(0,r.jsxs)(h.Z,{titleModal:"Konfirmasi OTP WhatsApp",openModal:J,setOpenModal:Q,handleSubmitFunction:()=>eu("wa"),children:[(0,r.jsxs)(z.Z,{children:["Kode OTP Email anda sudah dikirim ke WhatsApp anda ",null==ei?void 0:ei.merchant_wa,"."]}),(0,r.jsx)(z.Z,{children:"Silahkan konfirmasikan dengan memasukkan kode OTP Melalui WhatsApp."}),(0,r.jsx)(y.Z,{sx:{p:10},children:(0,r.jsx)(u.P,{length:6,value:$,onChange:e=>ee(e)})}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(z.Z,{variant:"body2",children:0==a?(0,r.jsx)(R,{onClick:e=>ec("wa"),children:"Kirim Ulang Kode OTP"}):(0,r.jsxs)(R,{disabled:!0,sx:{color:"gray"},children:["Kirim Ulang Kode OTP dalam (",a,")"]})})})]})]})};B.getLayout=e=>(0,r.jsx)(K.Z,{children:e}),a.default=B}},function(e){e.O(0,[3003,6058,5595,6310,8709,5285,8617,2888,9774,179],function(){return e(e.s=53829)}),_N_E=e.O()}]);