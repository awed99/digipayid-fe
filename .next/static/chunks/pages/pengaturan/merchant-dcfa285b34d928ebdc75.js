!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ad27b280-37e3-466e-ab1e-66abe4028f51",e._sentryDebugIdIdentifier="sentry-dbid-ad27b280-37e3-466e-ab1e-66abe4028f51")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3383],{621:function(e,t,n){"use strict";n.d(t,{r:function(){return d}});var r=n(92809),a=n(30266),i=n(809),o=n.n(i);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=(0,a.Z)(o().mark((function e(t,n,a,i,u,d){var c,s,v,h,p,f,m,g,x,b,_,w,y,j,Z,P,k,O=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.length>6&&void 0!==O[6]?O[6]:{},g=O.length>7&&void 0!==O[7]?O[7]:"string",x=null!==(c=null!==(s=null!==(v=null===n||void 0===n||null===(h=n.target)||void 0===h?void 0:h.value)&&void 0!==v?v:null===n||void 0===n?void 0:n.value)&&void 0!==s?s:n)&&void 0!==c?c:"",n instanceof Event?("number"!==g&&"int"!==g&&"integer"!==g||(x=""===x.toString()?"0":x.toString(),x=(x=null===(b=x)||void 0===b?void 0:b.replace(/\./g,"").replace(/\,/g,""))&&"NaN"!==x&&NaN!==x&&null!==(_=parseInt(x))&&void 0!==_?_:0),a[t]=x):a[t]=x,null===u||void 0===u||u.isValid(a).then((function(e){var t;e?d({}):null===u||void 0===u||null===(t=u.validate(a,{abortEarly:!1}))||void 0===t||t.catch((function(e){var t,n={};null===e||void 0===e||null===(t=e.inner)||void 0===t||t.map((function(e){var t,a,i,o;n=l(l({},n),{},(0,r.Z)({},null===e||void 0===e?void 0:e.path,((null===e||void 0===e||null===(t=e.message)||void 0===t||null===(a=t.charAt(0))||void 0===a?void 0:a.toUpperCase())+(null===e||void 0===e||null===(i=e.message)||void 0===i||null===(o=i.slice(1))||void 0===o?void 0:o.replace(/_([a-z])/g,(function(e){var t;return" "+(null===(t=e[1])||void 0===t?void 0:t.toUpperCase())})))).replace("must be less than or equal to","Max.").replace("must be greater than or equal to","Min.")))})),d(n?l({},n):{})}))})),w=a,y=null!==(p=null!==(f=null===n||void 0===n||null===(m=n.target)||void 0===m?void 0:m.value)&&void 0!==f?f:null===n||void 0===n?void 0:n.value)&&void 0!==p?p:n,"number"!==g&&"int"!==g&&"integer"!==g||(y=""===(null===(j=y)||void 0===j?void 0:j.toString())?"0":null===(Z=y)||void 0===Z?void 0:Z.toString(),y=null===(P=y)||void 0===P?void 0:P.replace(/\./g,"").replace(/\,/g,""),y=parseInt(null!==(k=y)&&void 0!==k?k:0)),w[t]=y,i(l({},w));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o){return e.apply(this,arguments)}}()},29805:function(e,t,n){"use strict";n.r(t);var r=n(30266),a=n(809),i=n.n(a),o=n(54567),u=n(59062),l=n(11091),d=n(52288),c=n(72574),s=n(65295),v=n(67720),h=n(15725),p=n(47665),f=n(1079),m=n(33797),g=n(56036),x=n(94659),b=n(2658),_=n(67294),w=n(11163),y=n(63906),j=n(16310),Z=n(81354),P=n.n(Z),k=n(65049),O=n(621),S=n(85893);t.default=function(){var e,t,n,a=(0,_.useState)(!1),Z=a[0],C=a[1],N=(0,_.useState)(),E=N[0],I=N[1],D=(0,_.useState)({id_user:null,merchant_name:"",merchant_address:"",merchant_wa:"",tax_percentage:0}),T=D[0],M=D[1],z=(0,_.useState)({open:!1,type:"success",message:""}),q=z[0],A=z[1],J=(0,w.useRouter)(),H=j.Ry().shape({id_user:j.Z_(),merchant_name:j.Z_().required(),merchant_address:j.Z_().required(),merchant_wa:j.Z_().required(),tax_percentage:j.Rx().required()}),U=function(){var e=(0,r.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),"/api/check-auth",e.next=4,(0,k.Hl)("/api/check-auth");case 4:n=e.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===n||void 0===n?void 0:n.signature,"x-timestamp":null===n||void 0===n?void 0:n.timestamp},body:JSON.stringify({email:null===(t=JSON.parse(localStorage.getItem("data-module")))||void 0===t?void 0:t.email})}).then((function(e){return e.json()})).then(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(null===t||void 0===t||null===(n=t.auth)||void 0===n?void 0:n.user)&&void 0!==(null===t||void 0===t||null===(r=t.auth)||void 0===r?void 0:r.token)){e.next=5;break}return J.push("/auth"),e.abrupt("return",!1);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/master/user/setting",e.next=3,(0,k.Hl)(a);case 3:return o=e.sent,e.t0=fetch,e.t1="".concat("http://localhost:8080").concat(a),e.t2=null===o||void 0===o?void 0:o.signature,e.t3=null===o||void 0===o?void 0:o.timestamp,e.next=10,P().AES.decrypt(null!==(n=null===t||void 0===t||null===(r=t.auth)||void 0===r?void 0:r.token)&&void 0!==n?n:"","digipay10D3w@").toString(P().enc.Utf8).replace(/\"/g,"");case 10:e.t4=e.sent,e.t5={"x-signature":e.t2,"x-timestamp":e.t3,Authorization:e.t4},e.t6=JSON.stringify({id:0}),e.t7={method:"POST",headers:e.t5,body:e.t6},(0,e.t0)(e.t1,e.t7).then((function(e){return e.json()})).then((function(e){var t,n;e.data.tax_percentage=parseFloat(null!==(t=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.tax_percentage)&&void 0!==t?t:0),M(null===e||void 0===e?void 0:e.data),C(!1)})).catch((function(){return C(!1)}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return C(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,_.useEffect)((function(){U()}),[]),(0,_.useLayoutEffect)((function(){localStorage.getItem("data-module")||J.push("/auth")}),[]);var W=function(){var e=(0,r.Z)(i().mark((function e(){var t,n,a,o,u=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.length>0&&void 0!==u[0]&&u[0],!((null===T||void 0===T||null===(t=T.merchant_name)||void 0===t?void 0:t.length)<6)){e.next=4;break}return alert("Merchant name must be at least 6 Characters!"),e.abrupt("return",!1);case 4:return C(!0),a="/api/check-auth",e.next=8,(0,k.Hl)(a);case 8:o=e.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===o||void 0===o?void 0:o.signature,"x-timestamp":null===o||void 0===o?void 0:o.timestamp},body:JSON.stringify({email:null===(n=JSON.parse(localStorage.getItem("data-module")))||void 0===n?void 0:n.email})}).then((function(e){return e.json()})).then(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(null===t||void 0===t||null===(n=t.auth)||void 0===n?void 0:n.user)&&void 0!==(null===t||void 0===t||null===(r=t.auth)||void 0===r?void 0:r.token)){e.next=5;break}return J.push("/auth"),e.abrupt("return",!1);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/master/user/update_setting",e.next=3,(0,k.Hl)(a);case 3:return o=e.sent,e.t0=fetch,e.t1="".concat("http://localhost:8080").concat(a),e.t2=null===o||void 0===o?void 0:o.signature,e.t3=null===o||void 0===o?void 0:o.timestamp,e.next=10,P().AES.decrypt(null!==(n=null===t||void 0===t||null===(r=t.auth)||void 0===r?void 0:r.token)&&void 0!==n?n:"","digipay10D3w@").toString(P().enc.Utf8).replace(/\"/g,"");case 10:e.t4=e.sent,e.t5={"x-signature":e.t2,"x-timestamp":e.t3,Authorization:e.t4},e.t6=JSON.stringify(T),e.t7={method:"POST",headers:e.t5,body:e.t6},(0,e.t0)(e.t1,e.t7).then((function(e){return e.json()})).then((function(e){var t,n;e.data.tax_percentage=parseFloat(null!==(t=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.tax_percentage)&&void 0!==t?t:0),M(null===e||void 0===e?void 0:e.data),C(!1),A({open:!0,type:"success",message:"Berhasil merubah data merchant."})})).catch((function(){return C(!1)}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return C(!1)}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(h.ZP,{container:!0,spacing:6,children:[(0,S.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,S.jsx)(b.Z,{variant:"h5",children:(0,S.jsx)(f.Z,{children:"Pengaturan"})}),(0,S.jsx)(b.Z,{variant:"body2",children:"Pengaturan Merchant yang tersedia"}),(0,S.jsx)(v.Z,{})]}),(0,S.jsx)(h.ZP,{item:!0,xs:12,children:(0,S.jsx)(s.Z,{children:(0,S.jsxs)(y.Z,{sx:{width:"100%",overflow:"auto"},children:[(0,S.jsx)(y.Z,{sx:{p:2},children:(0,S.jsx)(x.Z,{label:"Nama Merchant",variant:"outlined",fullWidth:!0,autoComplete:!1,onChange:function(e){return(0,O.r)("merchant_name",e,T,M,H,I)},value:null===T||void 0===T?void 0:T.merchant_name,error:null===E||void 0===E?void 0:E.merchant_name,helperText:"*Perubahan setelah logout & login ulang! "+(null!==(e=null===E||void 0===E?void 0:E.merchant_name)&&void 0!==e?e:""),inputProps:{autoComplete:"new-password"}})}),(0,S.jsx)(y.Z,{sx:{p:2},children:(0,S.jsx)(x.Z,{id:"merchant_address",name:"merchant_address",label:"Alamat Merchant",variant:"outlined",fullWidth:!0,autoComplete:!1,onChange:function(e){return(0,O.r)("merchant_address",e,T,M,H,I)},value:null===T||void 0===T?void 0:T.merchant_address,error:null===E||void 0===E?void 0:E.merchant_address,helperText:"*Perubahan setelah logout & login ulang! "+(null!==(t=null===E||void 0===E?void 0:E.merchant_address)&&void 0!==t?t:""),inputProps:{autoComplete:"new-password"}})}),(0,S.jsx)(y.Z,{sx:{p:2},children:(0,S.jsx)(x.Z,{id:"merchant_wa",name:"merchant_wa",label:"No. Whatsapp Merchant",variant:"outlined",fullWidth:!0,autoComplete:!1,onChange:function(e){return(0,O.r)("merchant_wa",e,T,M,H,I)},value:null===T||void 0===T?void 0:T.merchant_wa,error:null===E||void 0===E?void 0:E.merchant_wa,helperText:"*Perubahan setelah logout & login ulang! "+(null!==(n=null===E||void 0===E?void 0:E.merchant_wa)&&void 0!==n?n:""),inputProps:{autoComplete:"new-password"}})}),(0,S.jsxs)(y.Z,{sx:{p:2},children:[(0,S.jsx)(p.Z,{id:"demo-simple-select-label",children:"Pajak Penjualan"}),(0,S.jsxs)(g.Z,{label:"Pajak Penjualan",onChange:function(e){return(0,O.r)("tax_percentage",e,T,M,H,I)},value:null===T||void 0===T?void 0:T.tax_percentage,error:null===E||void 0===E?void 0:E.tax_percentage,children:[(0,S.jsx)(m.Z,{value:0,children:"0%"}),(0,S.jsx)(m.Z,{value:10,children:"10%"}),(0,S.jsx)(m.Z,{value:11,children:"11%"})]})]}),(0,S.jsxs)(y.Z,{sx:{p:2},children:[(0,S.jsx)(c.Z,{variant:"contained",sx:{mr:35,mt:10},onClick:function(){return W(!0)},children:"Simpan"}),(0,S.jsx)(c.Z,{variant:"contained",color:"warning",sx:{mr:35,mt:10},onClick:function(){return J.push("/master/metode-pembayaran")},children:"Pengaturan Metode Pembayaran"}),(0,S.jsx)(c.Z,{sx:{mr:35,mt:10},color:"error",variant:"contained",onClick:function(){return J.push("/master/user")},children:"Pengaturan User"})]})]})})}),(0,S.jsx)(o.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+999999}},open:Z,children:(0,S.jsx)(u.Z,{size:100,variant:"indeterminate"})}),(0,S.jsx)(l.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:null===q||void 0===q?void 0:q.open,autoHideDuration:3e3,onClose:function(){return A({open:!1,type:null===q||void 0===q?void 0:q.type,message:""})},children:(0,S.jsx)(d.Z,{variant:"filled",severity:null===q||void 0===q?void 0:q.type,sx:{width:"100%"},children:null===q||void 0===q?void 0:q.message})})]})}},99616:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pengaturan/merchant",function(){return n(29805)}])}},function(e){e.O(0,[5725,810,6310,7562,2114,9774,2888,179],(function(){return t=99616,e(e.s=t);var t}));var t=e.O();_N_E=t}]);