!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="937b9518-7a89-41a8-aa4b-c4693207277f",t._sentryDebugIdIdentifier="sentry-dbid-937b9518-7a89-41a8-aa4b-c4693207277f")}catch(t){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6430],{621:function(t,e,n){"use strict";n.d(e,{r:function(){return d}});var i=n(92809),r=n(30266),o=n(809),a=n.n(o);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=function(){var t=(0,r.Z)(a().mark((function t(e,n,r,o,l,d){var c,s,v,p,h,m,f,x,_,g,y,j,b,w,Z,S,k,I=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I.length>6&&void 0!==I[6]?I[6]:{},x=I.length>7&&void 0!==I[7]?I[7]:"string",_=null!==(c=null!==(s=null!==(v=null===n||void 0===n||null===(p=n.target)||void 0===p?void 0:p.value)&&void 0!==v?v:null===n||void 0===n?void 0:n.value)&&void 0!==s?s:n)&&void 0!==c?c:"",n instanceof Event?("number"!==x&&"int"!==x&&"integer"!==x||(_=""===_.toString()?"0":_.toString(),_=(_=null===(g=_)||void 0===g?void 0:g.replace(/\./g,"").replace(/\,/g,""))&&"NaN"!==_&&NaN!==_&&null!==(y=parseInt(_))&&void 0!==y?y:0),r[e]=_):r[e]=_,null===l||void 0===l||l.isValid(r).then((function(t){var e;t?d({}):null===l||void 0===l||null===(e=l.validate(r,{abortEarly:!1}))||void 0===e||e.catch((function(t){var e,n={};null===t||void 0===t||null===(e=t.inner)||void 0===e||e.map((function(t){var e,r,o,a;n=u(u({},n),{},(0,i.Z)({},null===t||void 0===t?void 0:t.path,((null===t||void 0===t||null===(e=t.message)||void 0===e||null===(r=e.charAt(0))||void 0===r?void 0:r.toUpperCase())+(null===t||void 0===t||null===(o=t.message)||void 0===o||null===(a=o.slice(1))||void 0===a?void 0:a.replace(/_([a-z])/g,(function(t){var e;return" "+(null===(e=t[1])||void 0===e?void 0:e.toUpperCase())})))).replace("must be less than or equal to","Max.").replace("must be greater than or equal to","Min.")))})),d(n?u({},n):{})}))})),j=r,b=null!==(h=null!==(m=null===n||void 0===n||null===(f=n.target)||void 0===f?void 0:f.value)&&void 0!==m?m:null===n||void 0===n?void 0:n.value)&&void 0!==h?h:n,"number"!==x&&"int"!==x&&"integer"!==x||(b=""===(null===(w=b)||void 0===w?void 0:w.toString())?"0":null===(Z=b)||void 0===Z?void 0:Z.toString(),b=null===(S=b)||void 0===S?void 0:S.replace(/\./g,"").replace(/\,/g,""),b=parseInt(null!==(k=b)&&void 0!==k?k:0)),j[e]=b,o(u({},j));case 10:case"end":return t.stop()}}),t)})));return function(e,n,i,r,o,a){return t.apply(this,arguments)}}()},91675:function(t,e,n){"use strict";n.d(e,{Z:function(){return m}});var i=n(80318),r=n(50594),o=n(72574),a=n(64666),l=n(88979),u=n(77750),d=n(37645),c=n(6867),s=n(90948),v=n(67294),p=n(85893),h=(0,s.ZP)(a.Z)((function(t){var e=t.theme;return{"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)}}}));function m(t){var e=t.children,n=t.titleModal,a=void 0===n?"Title Modal":n,s=t.ButtonDialogs,m=void 0!==s&&s,f=t.handleSubmitFunction,x=void 0!==f&&f,_=t.openModal,g=void 0!==_&&_,y=t.setOpenModal,j=v.useState(!1),b=(0,i.Z)(j,2),w=b[0],Z=b[1],S=function(){Z(!1),y(!1)},k=function(t){return(0,p.jsx)(o.Z,{variant:"contained",size:"small",sx:{m:3},onClick:t,children:"Submit"})};return v.useEffect((function(){Z(g)}),[g]),(0,p.jsx)(v.Fragment,{children:(0,p.jsxs)(h,{onClose:S,"aria-labelledby":"customized-dialog-title",open:w,fullWidth:!0,maxWidth:"md",children:[(0,p.jsx)(d.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:a}),(0,p.jsx)(c.Z,{"aria-label":"close",onClick:S,sx:{position:"absolute",right:8,top:8,color:function(t){return t.palette.grey[500]}},children:(0,p.jsx)(r.Z,{})}),(0,p.jsx)(u.Z,{dividers:!0,children:e}),(0,p.jsx)(l.Z,{children:x?k(x):m||k(S)})]})})}},52112:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var i=n(63906),r=n(90948),o=n(85893),a=(0,r.ZP)("div")((function(t){var e=t.theme;return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%","& .ant-empty-img-1":{fill:"light"===e.palette.mode?"#aeb8c2":"#262626"},"& .ant-empty-img-2":{fill:"light"===e.palette.mode?"#f5f5f7":"#595959"},"& .ant-empty-img-3":{fill:"light"===e.palette.mode?"#dce0e6":"#434343"},"& .ant-empty-img-4":{fill:"light"===e.palette.mode?"#fff":"#1c1c1c"},"& .ant-empty-img-5":{fillOpacity:"light"===e.palette.mode?"0.8":"0.08",fill:"light"===e.palette.mode?"#f5f5f5":"#fff"}}}));function l(){return(0,o.jsxs)(a,{children:[(0,o.jsx)("svg",{style:{flexShrink:0},width:"240",height:"200",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:(0,o.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,o.jsxs)("g",{transform:"translate(24 31.67)",children:[(0,o.jsx)("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),(0,o.jsx)("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),(0,o.jsx)("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),(0,o.jsx)("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),(0,o.jsx)("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),(0,o.jsxs)("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[(0,o.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),(0,o.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),(0,o.jsx)(i.Z,{sx:{mt:1},children:"No Rows"})]})}},38139:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var i=n(92809),r=n(70268),o=n(49630),a=n(14696),l=n(48949),u=n(76443),d=n(85893);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t){var e=t.page,n=t.onPageChange,i=t.className,u=(0,o.l)(),c=(0,a.P)(u,l.UB);return(0,d.jsx)(r.Z,{color:"primary",className:i,count:c,page:e+1,onChange:function(t,e){n(t,e-1)}})}function p(t){return(0,d.jsx)(u.x,s({ActionsComponent:v},t))}},76113:function(t,e,n){"use strict";n.r(e);var i=n(83789),r=n(92809),o=n(30266),a=n(809),l=n.n(a),u=n(6867),d=n(64666),c=n(37645),s=n(77750),v=n(88979),p=n(72574),h=n(67720),m=n(11091),f=n(52288),x=n(94659),_=n(80270),g=n(38607),y=n(59062),j=n(54567),b=n(65295),w=n(15725),Z=n(1079),S=n(90948),k=n(2658),I=n(46761),O=n(57711),P=n(95537),N=n(67294),D=n(11163),z=n(63906),M=n(82689),C=n(64644),T=n(52112),q=n(16310),A=n(81354),H=n.n(A),E=n(96486),R=n(1773),J=n(91675),F=n(65049),U=n(621),W=n(38139),L=n(85893);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.default=function(){var t,e,n,r,a,A,B,V,G,Q,$,X,Y,tt,et,nt,it,rt,ot,at,lt,ut,dt,ct,st,vt,pt,ht,mt,ft,xt,_t,gt,yt=(0,N.useState)(0),jt=(yt[0],yt[1],(0,N.useState)(0)),bt=jt[0],wt=jt[1],Zt=(0,N.useState)(!1),St=Zt[0],kt=Zt[1],It=(0,N.useState)(!1),Ot=It[0],Pt=It[1],Nt=(0,N.useState)(),Dt=Nt[0],zt=Nt[1],Mt=(0,N.useState)(!0),Ct=(Mt[0],Mt[1]),Tt=(0,N.useState)(!1),qt=Tt[0],At=Tt[1],Ht=(0,N.useState)(!1),Et=Ht[0],Rt=Ht[1],Jt=(0,N.useState)(!1),Ft=Jt[0],Ut=Jt[1],Wt=(0,N.useState)(!1),Lt=Wt[0],Bt=Wt[1],Kt=(0,N.useState)(!1),Vt=Kt[0],Gt=Kt[1],Qt=(0,N.useState)(!1),$t=Qt[0],Xt=Qt[1],Yt=(0,N.useState)(""),te=Yt[0],ee=Yt[1],ne=(0,N.useState)(4),ie=ne[0],re=ne[1],oe=(0,N.useState)("Ambil produk dari katalog"),ae=oe[0],le=oe[1],ue=(0,N.useState)("Tambahkan produk baru secara manual"),de=ue[0],ce=ue[1],se=(0,N.useState)("Detail Pembayaran"),ve=se[0],pe=(se[1],(0,N.useState)([])),he=pe[0],me=pe[1],fe=(0,N.useState)([]),xe=fe[0],_e=fe[1],ge=(0,N.useState)([]),ye=ge[0],je=ge[1],be=(0,N.useState)(null),we=be[0],Ze=be[1],Se=(0,N.useState)(0),ke=Se[0],Ie=Se[1],Oe=(0,N.useState)(0),Pe=Oe[0],Ne=Oe[1],De=(0,N.useState)([]),ze=De[0],Me=De[1],Ce=(0,N.useState)([]),Te=Ce[0],qe=Ce[1],Ae=(0,N.useState)([]),He=Ae[0],Ee=Ae[1],Re=(0,N.useState)(),Je=Re[0],Fe=Re[1],Ue=(0,N.useState)(1100),We=(Ue[0],Ue[1]),Le=(0,D.useRouter)(),Be=(0,N.useState)({product_code:"",product_name:"",product_qty:0,product_price:0}),Ke=Be[0],Ve=Be[1],Ge=(0,N.useState)({email_customer:"",wa_customer:"",payment_method_code:"",id_payment_method:0,amount_to_pay:0,fee:0}),Qe=Ge[0],$e=Ge[1],Xe=(0,N.useState)({open:!1,type:"success",message:""}),Ye=Xe[0],tn=Xe[1],en=q.Ry().shape({product_code:q.Z_().required(),product_name:q.Z_().required(),product_qty:q.Rx().min(1).required(),product_price:q.Rx().min(100).required()}),nn=(0,S.ZP)("img")({});function rn(t,e){return t.product_qty!==e.product_qty?"Jumlah '".concat(e.product_qty,"' menjadi '").concat(t.product_qty,"'"):t.product_price!==e.product_price?"Harga '".concat(e.product_price||"","' Menjadi '").concat(t.product_price||"","'"):null}var on=(0,N.useCallback)((function(t){return new Promise((function(e,n){setTimeout((function(){""===t.product_qty.toString().trim()||""===t.product_price.toString().trim()?n():e(t)}),200)}))}),[]),an=(0,N.useRef)(null),ln=(0,N.useState)(null),un=ln[0],dn=ln[1],cn=(0,N.useState)(null),sn=cn[0],vn=cn[1],pn=function(){return vn(null)},hn=function(){var t=(0,o.Z)(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/check-auth",t.next=3,(0,F.Hl)("/api/check-auth");case 3:n=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===n||void 0===n?void 0:n.signature,"x-timestamp":null===n||void 0===n?void 0:n.timestamp},body:JSON.stringify({email:null===(e=JSON.parse(localStorage.getItem("data-module")))||void 0===e?void 0:e.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/transactions/orders/get_temp_products",t.next=3,(0,F.Hl)(r);case 3:return o=t.sent,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(r),t.t2=null===o||void 0===o?void 0:o.signature,t.t3=null===o||void 0===o?void 0:o.timestamp,t.next=10,H().AES.decrypt(null!==(n=null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)&&void 0!==n?n:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 10:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({id:0}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){Me(null===t||void 0===t?void 0:t.data),Ie(null===t||void 0===t?void 0:t.saldo),Ne(parseInt(null===t||void 0===t?void 0:t.tax_percentage)),(null===t||void 0===t?void 0:t.saldo)<1e4&&Gt(!0),Pt(!1)})).catch((function(){return Pt(!1)}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return Pt(!1)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,N.useEffect)((function(){function t(){We(window.innerWidth)}return Pt(!0),kn(),window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t),kt(!1)}}),[]);var mn=[{field:"product_name",headerName:"Nama Produk",width:100},{field:"product_qty",headerName:"Jml",width:100,type:"number",editable:!0},{field:"product_price",headerName:"Harga",width:110,type:"number",editable:!0,renderCell:function(t){return(0,F.j7)((null===t||void 0===t?void 0:t.value).toString())}},{field:"total_price",headerName:"Total Harga",width:120,renderCell:function(t){var e,n;return(0,F.j7)(((null===t||void 0===t||null===(e=t.row)||void 0===e?void 0:e.product_qty)*(null===t||void 0===t||null===(n=t.row)||void 0===n?void 0:n.product_price)).toString())}},{field:"product_image_url",headerName:"Image",width:120,renderCell:function(t){return(0,L.jsx)("img",{src:"".concat("http://localhost:8080")+(null===t||void 0===t?void 0:t.value),width:100})}},{field:"delete",headerName:"Delete",width:100,renderCell:function(t){return(0,L.jsx)(u.Z,{"aria-label":"delete",onClick:function(){return gn(t)},children:(0,L.jsx)(I.Z,{color:"error"})})}}],fn=[{field:"product_code",headerName:"Kode",width:70},{field:"product_name",headerName:"Nama Produk",width:160},{field:"product_qty",headerName:"Stok",width:100},{field:"product_price",headerName:"Harga",width:120,renderCell:function(t){return(0,F.j7)(null===t||void 0===t?void 0:t.value)}},{field:"product_image_url",headerName:"Image",width:120,renderCell:function(t){return(0,L.jsx)("img",{src:"".concat("http://localhost:8080")+(null===t||void 0===t?void 0:t.value),width:100})}}],xn=function(){var t=(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ee(""),le("Ambil produk dari katalog"),At(!0),In();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_n=function(){var t=(0,o.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ce("Tambahkan produk baru secara manual"),Fe(null),Ve({id_product:null,product_code:"",product_name:"",product_qty:0,product_price:0,product_status:"1"}),Rt(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),gn=function(){var t=(0,o.Z)(l().mark((function t(){var e,n,i,r,a,u=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.length>0&&void 0!==u[0]?u[0]:{},Ct(!1),!confirm("Anda yakin ingin membatalkan produk "+(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.product_name)+" ?")){t.next=9;break}return r="/api/check-auth",t.next=7,(0,F.Hl)(r);case 7:a=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===a||void 0===a?void 0:a.signature,"x-timestamp":null===a||void 0===a?void 0:a.timestamp},body:JSON.stringify({email:null===(i=JSON.parse(localStorage.getItem("data-module")))||void 0===i?void 0:i.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(e){var i,r,o,a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/transactions/orders/delete_temp_products",t.next=3,(0,F.Hl)(a);case 3:return u=t.sent,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(a),t.t2=null===u||void 0===u?void 0:u.signature,t.t3=null===u||void 0===u?void 0:u.timestamp,t.next=10,H().AES.decrypt(null!==(i=null===e||void 0===e||null===(r=e.auth)||void 0===r?void 0:r.token)&&void 0!==i?i:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 10:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({id:null===n||void 0===n||null===(o=n.row)||void 0===o?void 0:o.id}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){Me(null===t||void 0===t?void 0:t.data).catch((function(){return!1}))})).catch((function(){return!1}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),yn=function(){var t=(0,o.Z)(l().mark((function t(){var e,n,i,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>0&&(null===Qe||void 0===Qe||null===(e=Qe.wa_customer)||void 0===e?void 0:e.length)<10&&(null===Qe||void 0===Qe||null===(n=Qe.email_customer)||void 0===n?void 0:n.length)<10)){t.next=3;break}return tn({open:!0,type:"error",message:"Pembayaran Digital wajib mencantumkan email atau whatsapp pelanggan!"}),t.abrupt("return",!1);case 3:if(!(null===(null===Qe||void 0===Qe?void 0:Qe.amount_to_pay)||""===(null===Qe||void 0===Qe?void 0:Qe.amount_to_pay)||0===parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)&&parseInt((null===Qe||void 0===Qe?void 0:Qe.amount_to_pay).toString().replace(/\./g,""))<parseInt(null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0)))){t.next=6;break}return alert("Uang pembayaran masih kurang!"),t.abrupt("return",!1);case 6:return Pt(!0),"/api/check-auth",t.next=10,(0,F.Hl)("/api/check-auth");case 10:r=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===r||void 0===r?void 0:r.signature,"x-timestamp":null===r||void 0===r?void 0:r.timestamp},body:JSON.stringify({email:null===(i=JSON.parse(localStorage.getItem("data-module")))||void 0===i?void 0:i.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i,r,o,a,u,d,c,s,v,p,h,m,f,x,_,g,y,j,b,w,Z,S,k,I,O,P,N,D,z,M,C;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j=we?"/transactions/orders/update":"/transactions/orders/create",t.next=3,(0,F.Hl)(j);case 3:return b=t.sent,w=null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0),Z=parseFloat(null!==(n=null===(i=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(r=Qe.id_payment_method)||void 0===r?void 0:r.toString()})[0])||void 0===i?void 0:i.fee_original)&&void 0!==n?n:"0"),S=parseFloat(null!==(o=null===(a=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(u=Qe.id_payment_method)||void 0===u?void 0:u.toString()})[0])||void 0===a?void 0:a.fee_original_percent)&&void 0!==o?o:"0"),k=parseFloat(null!==(d=null===(c=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(s=Qe.id_payment_method)||void 0===s?void 0:s.toString()})[0])||void 0===c?void 0:c.fee_app)&&void 0!==d?d:"500"),I=parseFloat(null!==(v=null===(p=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(h=Qe.id_payment_method)||void 0===h?void 0:h.toString()})[0])||void 0===p?void 0:p.fee_app_percent)&&void 0!==v?v:"0"),P=100-(S+I),N=w+Z+k+(O=w*Pe/100),D=Math.ceil((100*N/P).toFixed(1)),z=Math.ceil((D*S/100).toFixed(1))+Z,M=Math.ceil((D*I/100).toFixed(1))+k,D=w+z+M+O,C=null!==(m=parseInt(null===(f=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()})[0])||void 0===f?void 0:f.fee_on_merchant))&&void 0!==m?m:1,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(j),t.t2=null===b||void 0===b?void 0:b.signature,t.t3=null===b||void 0===b?void 0:b.timestamp,t.next=24,H().AES.decrypt(null!==(x=null===e||void 0===e||null===(_=e.auth)||void 0===_?void 0:_.token)&&void 0!==x?x:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 24:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({email_customer:null===Qe||void 0===Qe?void 0:Qe.email_customer,wa_customer:null===Qe||void 0===Qe?void 0:Qe.wa_customer,total_product:null===Te||void 0===Te?void 0:Te.length,amount:0===C?D:w+O,tax_percentage:Pe,amount_tax:O,amount_to_pay:parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>0?0===C?D:w+O:parseInt(null===Qe||void 0===Qe?void 0:Qe.amount_to_pay.toString().replace(/\./g,"")),pg_fee:z,app_fee:M,fee:z+M,id_payment_method:parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method),payment_method_code:null===(g=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()})[0])||void 0===g?void 0:g.payment_method_code,payment_method_name:null===(y=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()})[0])||void 0===y?void 0:y.payment_method_name,fee_on_merchant:C,invoice_number:we}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){if(""!==(null===t||void 0===t?void 0:t.error))return tn({type:"error",open:!0,message:null===t||void 0===t?void 0:t.error}),Pt(!1),!1;var e,n;1===(null===t||void 0===t?void 0:t.code)?(je(null===t||void 0===t?void 0:t.payment),Bt(!0),kt(!0),null!==t&&void 0!==t&&null!==(e=t.payment)&&void 0!==e&&null!==(n=e.req)&&void 0!==n&&n.reff_id&&Ze(null===t||void 0===t?void 0:t.reff_id)):(Ze(null===t||void 0===t?void 0:t.reff_id),Bt(!0),kt(!0),wt(0===C?w+z+M:w),$e({email_customer:"",wa_customer:"",payment_method_code:"",id_payment_method:0,amount_to_pay:0,fee:0}));Me(null===t||void 0===t?void 0:t.data),kn(),Ut(!1),Pt(!1)})).catch((function(){return Pt(!1)}));case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return Pt(!1)}));case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),jn=function(){var t=(0,o.Z)(l().mark((function t(e){var n,i,r,a,u,d,c=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=c.length>1&&void 0!==c[1]?c[1]:10,a=ye,r=St){t.next=5;break}return t.abrupt("return",!1);case 5:return u="/api/check-auth",t.next=8,(0,F.Hl)(u);case 8:d=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===d||void 0===d?void 0:d.signature,"x-timestamp":null===d||void 0===d?void 0:d.timestamp},body:JSON.stringify({email:null===(n=JSON.parse(localStorage.getItem("data-module")))||void 0===n?void 0:n.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(n){var o,u,d,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d="/transactions/orders/check_status",t.next=3,(0,F.Hl)(d);case 3:return c=t.sent,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(d),t.t2=null===c||void 0===c?void 0:c.signature,t.t3=null===c||void 0===c?void 0:c.timestamp,t.next=10,H().AES.decrypt(null!==(o=null===n||void 0===n||null===(u=n.auth)||void 0===u?void 0:u.token)&&void 0!==o?o:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 10:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({invoice_number:e}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){var n;parseInt(null===t||void 0===t?void 0:t.status)>0?(tn({open:!0,type:"success",message:"Pembayaran Berhasil."}),Bt(!1),Xt(!0),kt(!1),Ze(null)):(i+=1,!0===r&&null!==a&&void 0!==a&&null!==(n=a.req)&&void 0!==n&&n.reff_id&&i<10?setTimeout((function(){return jn(e,i)}),5e3):kt(!1));Pt(!1)})).catch((function(){return Pt(!1)}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return Pt(!1)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),bn=function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Pt(!0),"/api/check-auth",t.next=4,(0,F.Hl)("/api/check-auth");case 4:i=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===i||void 0===i?void 0:i.signature,"x-timestamp":null===i||void 0===i?void 0:i.timestamp},body:JSON.stringify({email:null===(n=JSON.parse(localStorage.getItem("data-module")))||void 0===n?void 0:n.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(n){var i,r,o,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="/transactions/orders/resend_billing",t.next=3,(0,F.Hl)(o);case 3:return a=t.sent,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(o),t.t2=null===a||void 0===a?void 0:a.signature,t.t3=null===a||void 0===a?void 0:a.timestamp,t.next=10,H().AES.decrypt(null!==(i=null===n||void 0===n||null===(r=n.auth)||void 0===r?void 0:r.token)&&void 0!==i?i:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 10:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({invoice_number:e}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){tn({open:!0,type:"success",message:"Sukses mengirim ulang tagihan"}),Pt(!1)})).catch((function(){return Pt(!1)}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return Pt(!1)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wn=function(){var t=(0,o.Z)(l().mark((function t(){var e,n,i,r=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]&&r[0],n="/api/check-auth",t.next=4,(0,F.Hl)(n);case 4:return i=t.sent,t.next=7,en.isValid(Ke);case 7:if(t.t0=t.sent,!1!==t.t0){t.next=11;break}return tn({open:!0,type:"error",message:"Mohon lengkapi semua data."}),t.abrupt("return",!1);case 11:if(Je){t.next=14;break}return tn({open:!0,type:"error",message:"Foto produk wajib ada!"}),t.abrupt("return",!1);case 14:fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===i||void 0===i?void 0:i.signature,"x-timestamp":null===i||void 0===i?void 0:i.timestamp},body:JSON.stringify({email:null===(e=JSON.parse(localStorage.getItem("data-module")))||void 0===e?void 0:e.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i,r,o,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/transactions/orders/create_temp_products",t.next=3,(0,F.Hl)(r);case 3:return o=t.sent,null===Ke||void 0===Ke||delete Ke.selectedFile,a=new FormData,Object.keys(Ke).forEach((function(t){a.append(t,Ke[t])})),a.append("userfile",Je,Je.name),t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(r),t.t2=null===o||void 0===o?void 0:o.signature,t.t3=null===o||void 0===o?void 0:o.timestamp,t.next=14,H().AES.decrypt(null!==(n=null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)&&void 0!==n?n:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 14:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=a,t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){Me(null===t||void 0===t?void 0:t.data),Rt(!1)})).catch((function(){return!1}));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return!1}));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Zn=function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/check-auth",t.next=3,(0,F.Hl)("/api/check-auth");case 3:i=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===i||void 0===i?void 0:i.signature,"x-timestamp":null===i||void 0===i?void 0:i.timestamp},body:JSON.stringify({email:null===(n=JSON.parse(localStorage.getItem("data-module")))||void 0===n?void 0:n.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(n){var i,r,o,a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="/transactions/orders/update_temp_products",t.next=3,(0,F.Hl)(o);case 3:return a=t.sent,(u=new FormData).append("id",null===e||void 0===e?void 0:e.id),u.append("product_qty",null===e||void 0===e?void 0:e.product_qty),u.append("product_price",null===e||void 0===e?void 0:e.product_price),t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(o),t.t2=null===a||void 0===a?void 0:a.signature,t.t3=null===a||void 0===a?void 0:a.timestamp,t.next=14,H().AES.decrypt(null!==(i=null===n||void 0===n||null===(r=n.auth)||void 0===r?void 0:r.token)&&void 0!==i?i:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 14:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=u,t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){Me(null===t||void 0===t?void 0:t.data),Rt(!1)})).catch((function(){return!1}));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Sn=function(){var t=(0,o.Z)(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((null===he||void 0===he?void 0:he.length)>0)){t.next=6;break}return"/api/check-auth",t.next=4,(0,F.Hl)("/api/check-auth");case 4:n=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===n||void 0===n?void 0:n.signature,"x-timestamp":null===n||void 0===n?void 0:n.timestamp},body:JSON.stringify({email:null===(e=JSON.parse(localStorage.getItem("data-module")))||void 0===e?void 0:e.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/transactions/orders/create_temp_products2",t.next=3,(0,F.Hl)(r);case 3:return o=t.sent,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(r),t.t2=null===o||void 0===o?void 0:o.signature,t.t3=null===o||void 0===o?void 0:o.timestamp,t.next=10,H().AES.decrypt(null!==(n=null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)&&void 0!==n?n:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 10:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({id_product:he}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){Me(null===t||void 0===t?void 0:t.data),At(!1),me([])})).catch((function(){return!1}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return!1}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,N.useEffect)((function(){!0===St&&we&&setTimeout((function(){return jn(we,0)}),5e3)}),[St,we]),(0,N.useEffect)((function(){re(1)}),[te]),(0,N.useEffect)((function(){!1===Lt&&(Ze(null),wt(0),$e({email_customer:"",wa_customer:"",id_payment_method:0,amount_to_pay:0,payment_method_code:"",fee:0}),kt(!1))}),[Lt]),(0,N.useEffect)((function(){qe(ze)}),[ze]),(0,N.useEffect)((function(){var t,e,n,i,r,o,a,l,u,d,c,s,v,p,h,m,f,x,_,g=null!==(t=parseInt(null===(e=(0,E.filter)(xe,{id_payment_method:null!==(n=null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString())&&void 0!==n?n:"0"})[0])||void 0===e?void 0:e.fee_on_merchant))&&void 0!==t?t:1,y=null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0),j=parseFloat(null!==(i=null===(r=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(a=Qe.id_payment_method)||void 0===a?void 0:a.toString()}))||void 0===r||null===(o=r[0])||void 0===o?void 0:o.fee_original)&&void 0!==i?i:"500"),b=parseFloat(null!==(l=null===(u=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(c=Qe.id_payment_method)||void 0===c?void 0:c.toString()}))||void 0===u||null===(d=u[0])||void 0===d?void 0:d.fee_original_percent)&&void 0!==l?l:"0")/100,w=parseFloat(null!==(s=null===(v=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(h=Qe.id_payment_method)||void 0===h?void 0:h.toString()}))||void 0===v||null===(p=v[0])||void 0===p?void 0:p.fee_app)&&void 0!==s?s:"0"),Z=parseFloat(null!==(m=null===(f=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe||null===(_=Qe.id_payment_method)||void 0===_?void 0:_.toString()}))||void 0===f||null===(x=f[0])||void 0===x?void 0:x.fee_app_percent)&&void 0!==m?m:"0")/100,S=0===g?y*(b+Z)+(j+w):0,k=Qe;k.fee=S,$e(K({},k))}),[xe,null===Qe||void 0===Qe?void 0:Qe.id_payment_method,null===Qe||void 0===Qe?void 0:Qe.amount_to_pay]),(0,N.useEffect)((function(){ie>0&&ie<3?setTimeout((function(){ie>0&&ie<3&&re(ie-1)}),1e3):ie<1&&(re(4),In())}),[ie]);var kn=function(){var t=(0,o.Z)(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/check-auth",t.next=3,(0,F.Hl)("/api/check-auth");case 3:n=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===n||void 0===n?void 0:n.signature,"x-timestamp":null===n||void 0===n?void 0:n.timestamp},body:JSON.stringify({email:null===(e=JSON.parse(localStorage.getItem("data-module")))||void 0===e?void 0:e.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/master/payment_method/list",t.next=3,(0,F.Hl)(r);case 3:return o=t.sent,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(r),t.t2=null===o||void 0===o?void 0:o.signature,t.t3=null===o||void 0===o?void 0:o.timestamp,t.next=10,H().AES.decrypt(null!==(n=null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)&&void 0!==n?n:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 10:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({id:0}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){_e(null===t||void 0===t?void 0:t.data),hn()})).catch((function(){return Pt(!1)}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return Pt(!1)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),In=function(){var t=(0,o.Z)(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/check-auth",t.next=3,(0,F.Hl)("/api/check-auth");case 3:n=t.sent,fetch("".concat("http://localhost:8080","/auth/check_auth"),{method:"POST",headers:{"x-signature":null===n||void 0===n?void 0:n.signature,"x-timestamp":null===n||void 0===n?void 0:n.timestamp},body:JSON.stringify({email:null===(e=JSON.parse(localStorage.getItem("data-module")))||void 0===e?void 0:e.email})}).then((function(t){return t.json()})).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.user)&&void 0!==(null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)){t.next=5;break}return Le.push("/auth"),t.abrupt("return",!1);case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then(function(){var t=(0,o.Z)(l().mark((function t(e){var n,i,r,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="/master/product/list",t.next=3,(0,F.Hl)(r);case 3:return o=t.sent,t.t0=fetch,t.t1="".concat("http://localhost:8080").concat(r),t.t2=null===o||void 0===o?void 0:o.signature,t.t3=null===o||void 0===o?void 0:o.timestamp,t.next=10,H().AES.decrypt(null!==(n=null===e||void 0===e||null===(i=e.auth)||void 0===i?void 0:i.token)&&void 0!==n?n:"","digipay10D3w@").toString(H().enc.Utf8).replace(/\"/g,"");case 10:t.t4=t.sent,t.t5={"x-signature":t.t2,"x-timestamp":t.t3,Authorization:t.t4},t.t6=JSON.stringify({search:te}),t.t7={method:"POST",headers:t.t5,body:t.t6},(0,t.t0)(t.t1,t.t7).then((function(t){return t.json()})).then((function(t){Ee(null===t||void 0===t?void 0:t.data)})).catch((function(){return!1}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){return!1}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,N.useLayoutEffect)((function(){localStorage.getItem("data-module")||Le.push("/auth")}),[]);var On=(0,N.useCallback)((function(t,e){return new Promise((function(n,i){rn(t,e)?dn({resolve:n,reject:i,newRow:t,oldRow:e}):n(e)}))}),[]),Pn=function(){var t=un.oldRow;(0,un.resolve)(t),dn(null)},Nn=function(){var t=(0,o.Z)(l().mark((function t(){var e,n,r,o,a,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=un.newRow,n=un.oldRow,r=un.reject,o=un.resolve,t.prev=1,t.next=4,on(e);case 4:a=t.sent,u=null===Te||void 0===Te?void 0:Te.map((function(t){return K(K({},t),{},{product_qty:(null===t||void 0===t?void 0:t.id)===(null===a||void 0===a?void 0:a.id)?a.product_qty:null===t||void 0===t?void 0:t.product_qty,product_price:(null===t||void 0===t?void 0:t.id)===(null===a||void 0===a?void 0:a.id)?a.product_price:null===t||void 0===t?void 0:t.product_price})})),qe((0,i.Z)(u)),Zn(a),vn({children:"Data sudah di perbaharui.",severity:"success"}),o(a),dn(null),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(1),vn({children:"Data tidak boleh kosong!",severity:"error"}),r(n),dn(null);case 18:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),Dn=function(){};return(0,L.jsxs)(w.ZP,{container:!0,spacing:6,children:[(0,L.jsxs)(w.ZP,{item:!0,xs:12,children:[(0,L.jsx)(k.Z,{variant:"h5",children:(0,L.jsx)(Z.Z,{children:"Pembayaran - Kasir"})}),(0,L.jsx)(k.Z,{variant:"body2",children:"Pembelian produk"}),(0,L.jsx)(h.Z,{}),(0,L.jsxs)(k.Z,{variant:"body2",children:[(0,L.jsx)(p.Z,{variant:"contained",size:"small",sx:{mr:3.5,mb:5},onClick:function(){return xn()},disabled:ke<1e4,children:"Katalog Produk"}),"\u2003 \u2003",(0,L.jsx)(p.Z,{variant:"contained",color:"warning",size:"small",sx:{mr:3.5,mb:5},onClick:function(){return _n()},disabled:ke<1e4,children:"Produk Baru"}),(null===ze||void 0===ze?void 0:ze.length)>0&&(0,L.jsxs)(L.Fragment,{children:["\u2003 \u2003",(0,L.jsx)(p.Z,{variant:"contained",color:"success",size:"small",sx:{mr:3.5,mb:5},onClick:function(){return Ut(!0)},disabled:ke<1e4,children:"($) Proses Pembayaran"})]})]})]}),(0,L.jsx)(w.ZP,{item:!0,xs:12,children:(0,L.jsx)(b.Z,{children:(0,L.jsxs)(z.Z,{sx:{width:"100%",overflow:"auto"},children:[function(){if(!un)return null;var t=rn(un.newRow,un.oldRow);return(0,L.jsxs)(d.Z,{maxWidth:"xs",TransitionProps:{onEntered:Dn},open:!!un,children:[(0,L.jsx)(c.Z,{children:"Apakah anda yakin?"}),(0,L.jsxs)(s.Z,{dividers:!0,children:[(0,L.jsx)(k.Z,{children:"Klik 'Ya' untuk merubah"}),(0,L.jsx)(k.Z,{children:t})]}),(0,L.jsxs)(v.Z,{children:[(0,L.jsx)(p.Z,{ref:an,onClick:Pn,children:"Tidak"}),(0,L.jsx)(p.Z,{onClick:Nn,children:"Ya"})]})]})}(),(0,L.jsx)(M._$,{density:"compact",autoHeight:!0,rows:ze,columns:mn,getRowId:function(t){return t.id},initialState:K(K({},ze.initialState),{},{pagination:{paginationModel:{pageSize:25}}}),editMode:"row",slots:{toolbar:C.n,noRowsOverlay:T.Z,footer:function(){var t,e;return(0,L.jsxs)(z.Z,{sx:{p:3},children:[(0,L.jsx)(h.Z,{}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(W.Z,{})}),(0,L.jsx)(h.Z,{}),(0,L.jsx)(k.Z,{children:(0,L.jsxs)("b",{children:[null===ze||void 0===ze?void 0:ze.length," Produk"]})}),(0,L.jsx)(k.Z,{children:(0,L.jsxs)("b",{children:["Jumlah Item :"," ",(0,F.j7)(null===Te||void 0===Te||null===(t=Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))||void 0===t?void 0:t.toString())]})}),(0,L.jsx)(k.Z,{children:(0,L.jsxs)("b",{children:["Total :"," ",(0,F.j7)(null===Te||void 0===Te||null===(e=Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))||void 0===e?void 0:e.toString())]})})]})}},slotProps:{toolbar:{showQuickFilter:!0}},sx:{pt:2,minHeight:"350px","--DataGrid-overlayHeight":"300px"},processRowUpdate:On}),!!sn&&(0,L.jsx)(m.Z,{open:!0,onClose:pn,autoHideDuration:6e3,children:(0,L.jsx)(f.Z,K(K({},sn),{},{onClose:pn}))})]})})}),(0,L.jsx)(J.Z,{titleModal:ae,openModal:qt,setOpenModal:At,handleSubmitFunction:function(){return Sn()},children:(0,L.jsxs)(z.Z,{sx:{width:"100%"},children:[(0,L.jsx)(x.Z,{label:"Cari Produk di Katalog",variant:"outlined",fullWidth:!0,size:"small",sx:{mb:1},onChange:function(t){return ee(t.target.value)},value:te}),(0,L.jsx)(h.Z,{sx:{mb:1}}),(0,L.jsx)(w.ZP,{item:!0,xs:12,children:(0,L.jsx)(b.Z,{children:(0,L.jsx)(z.Z,{sx:{width:"100%",overflow:"auto"},children:(0,L.jsx)(M._$,{density:"compact",autoHeight:!0,rows:He,columns:fn,getRowId:function(t){return t.id_product},initialState:K(K({},ze.initialState),{},{pagination:{paginationModel:{pageSize:25}}}),slots:{toolbar:C.n,noRowsOverlay:T.Z,pagination:W.Z},slotProps:{toolbar:{showQuickFilter:!0}},sx:{pt:2,minHeight:"350px","--DataGrid-overlayHeight":"300px"},isRowSelectable:function(t){return t.row.product_qty>0},checkboxSelection:!0,onRowSelectionModelChange:function(t){me(t)},rowSelectionModel:he})})})})]})}),(0,L.jsx)(J.Z,{titleModal:de,openModal:Et,setOpenModal:Rt,handleSubmitFunction:function(){return wn()},children:(0,L.jsxs)(z.Z,{children:[(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"Kode Produk",variant:"outlined",fullWidth:!0,size:"small",onChange:function(t){return(0,U.r)("product_code",t,Ke,Ve,en,zt)},value:null===Ke||void 0===Ke?void 0:Ke.product_code,error:null===Dt||void 0===Dt?void 0:Dt.product_code,helperText:null===Dt||void 0===Dt?void 0:Dt.product_code})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"Nama Produk",variant:"outlined",fullWidth:!0,size:"small",sx:{mt:5},onFocus:function(t){return t.target.select()},onChange:function(t){return(0,U.r)("product_name",t,Ke,Ve,en,zt)},value:null===Ke||void 0===Ke?void 0:Ke.product_name,error:null===Dt||void 0===Dt?void 0:Dt.product_name,helperText:null===Dt||void 0===Dt?void 0:Dt.product_name})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"Harga Produk",variant:"outlined",size:"small",sx:{mt:5},InputProps:{startAdornment:(0,L.jsx)(_.Z,{position:"start",children:"IDR"})},onFocus:function(t){return t.target.select()},onChange:function(t){return(0,U.r)("product_price",t,Ke,Ve,en,zt)},value:null===Ke||void 0===Ke?void 0:Ke.product_price,error:null===Dt||void 0===Dt?void 0:Dt.product_price,helperText:null===Dt||void 0===Dt?void 0:Dt.product_price})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"Jumlah Produk",variant:"outlined",size:"small",sx:{mt:5},InputProps:{endAdornment:(0,L.jsx)(_.Z,{position:"end",children:"Qty"})},onChange:function(t){return(0,U.r)("product_qty",t,Ke,Ve,en,zt)},value:null===Ke||void 0===Ke?void 0:Ke.product_qty,error:null===Dt||void 0===Dt?void 0:Dt.product_qty,helperText:null===Dt||void 0===Dt?void 0:Dt.product_qty})}),(0,L.jsxs)(z.Z,{sx:{mt:5},children:[!Je&&(0,L.jsxs)(u.Z,{color:"primary","aria-label":"upload picture",component:"label",children:[(0,L.jsx)("input",{hidden:!0,accept:"image/*",type:"file",onChange:function(t){return function(t){var e,n,i;null!==t&&void 0!==t&&null!==(e=t.target)&&void 0!==e&&e.files[0]&&(Fe(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.files[0]),(0,U.r)("selectedFile",null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.files[0],Ke,Ve,en,zt))}(t)}}),(0,L.jsx)(O.Z,{})]}),Je&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(R.Z,{small:"object"===typeof Je?null===(t=window)||void 0===t||null===(e=t.URL)||void 0===e?void 0:e.createObjectURL(Je):Je,large:"object"===typeof Je?null===(n=window)||void 0===n||null===(r=n.URL)||void 0===r?void 0:r.createObjectURL(Je):Je,alt:"Tuntaz",className:"image-thumbnail2",style:{width:"50px"}})," ","\u2003",(0,L.jsx)(u.Z,{sx:{color:"rgba(255, 255, 255, 0.54)"},"aria-label":"Delete",onClick:function(){return Fe()},children:(0,L.jsx)(P.Z,{style:{color:"red"}})})]})]})]})}),(0,L.jsx)(J.Z,{titleModal:ve,openModal:Ft,setOpenModal:Ut,handleSubmitFunction:function(){return yn()},children:(0,L.jsxs)(z.Z,{children:[(0,L.jsx)("h5",{children:"Data Pelanggan (Struk Digital - Go Green)"}),(0,L.jsx)(z.Z,{sx:{mt:-4},children:(0,L.jsx)(x.Z,{label:"Email Pelanggan",variant:"outlined",fullWidth:!0,size:"small",onChange:function(t){return(0,U.r)("email_customer",t,Qe,$e,en,zt)},value:null===Qe||void 0===Qe?void 0:Qe.email_customer})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"No Whatsapp",variant:"outlined",fullWidth:!0,size:"small",sx:{mt:4},onChange:function(t){return(0,U.r)("wa_customer",t,Qe,$e,en,zt)},value:null===Qe||void 0===Qe?void 0:Qe.wa_customer})}),(0,L.jsx)(h.Z,{}),(0,L.jsx)("h5",{children:"Metode Pembayaran"}),(0,L.jsx)(z.Z,{sx:{mt:-6},children:(0,L.jsx)(x.Z,{label:"Jumlah Pembayaran",variant:"outlined",size:"small",sx:{mt:4},InputProps:{startAdornment:(0,L.jsx)(_.Z,{position:"start",children:"IDR"})},disabled:parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>0,onFocus:function(t){return t.target.select()},onChange:function(t){return(0,U.r)("amount_to_pay",t,Qe,$e,en,zt)},value:parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>0?(0,F.j7)((null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))+parseInt(null===Qe||void 0===Qe?void 0:Qe.fee)+(null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))*Pe/100):(0,F.j7)(null===Qe||void 0===Qe?void 0:Qe.amount_to_pay)})}),(0,L.jsx)(z.Z,{sx:{mt:5},children:(0,L.jsx)(g.Z,{value:{id:null===(a=(0,E.filter)(xe,["id_payment_method",null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()])[0])||void 0===a?void 0:a.id,label:null===(A=(0,E.filter)(xe,["id_payment_method",null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()])[0])||void 0===A?void 0:A.payment_method_name},onChange:function(t,e){(0,U.r)("id_payment_method",null===e||void 0===e?void 0:e.id_payment_method,Qe,$e,en,zt,Dt,"int")},id:"combo-box-demo",size:"small",options:null===xe||void 0===xe?void 0:xe.map((function(t){return K(K({},t),{},{id:null===t||void 0===t?void 0:t.payment_method_id,label:null===t||void 0===t?void 0:t.payment_method_name})})),renderInput:function(t){return(0,L.jsx)(x.Z,K(K({size:"small"},t),{},{label:"Metode Pembayaran",fullWidth:!1,sx:{minWidth:"300px"}}))}})}),(0,L.jsx)(z.Z,{sx:{mt:2},children:(0,L.jsx)(nn,{alt:null===(B=(0,E.filter)(xe,["id_payment_method",null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()])[0])||void 0===B?void 0:B.payment_method_name,src:null===(V=(0,E.filter)(xe,["id_payment_method",null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()])[0])||void 0===V?void 0:V.payment_method_image_url,width:70,height:"auto"})}),(0,L.jsx)(h.Z,{}),(0,L.jsxs)(z.Z,{children:[(0,L.jsxs)("h3",{children:["Pajak : IDR"," ",(0,F.j7)((null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))*Pe/100)]}),(0,L.jsxs)("h3",{children:["Pembayaran : IDR"," ",parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>0?(0,F.j7)((null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))+parseInt(null===Qe||void 0===Qe?void 0:Qe.fee)+(null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))*Pe/100):(0,F.j7)(null===Qe||void 0===Qe?void 0:Qe.amount_to_pay)]}),(0,L.jsxs)("h3",{children:["Kembalian : IDR"," ",parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>0?0:(0,F.j7)(null===(G=parseInt((null===Qe||void 0===Qe?void 0:Qe.amount_to_pay).toString().replace(/\./g,""))-parseInt((null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))+parseInt(null===Qe||void 0===Qe?void 0:Qe.fee)+(null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))*Pe/100))||void 0===G?void 0:G.toString())]})]}),(0,L.jsx)(h.Z,{}),(0,L.jsx)("h5",{children:"Total Pembelian"}),(0,L.jsx)(z.Z,{sx:{mt:-4},children:(0,L.jsx)(x.Z,{label:"Jumlah Produk",variant:"outlined",size:"small",disabled:!0,InputProps:{startAdornment:(0,L.jsx)(_.Z,{position:"start",children:"Qty"}),endAdornment:(0,L.jsx)(_.Z,{position:"end",children:"Items"})},value:null===Te||void 0===Te?void 0:Te.length})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"Harga Produk",variant:"outlined",size:"small",sx:{mt:4},InputProps:{startAdornment:(0,L.jsx)(_.Z,{position:"start",children:"IDR"})},disabled:!0,value:(0,F.j7)(null===Te||void 0===Te||null===(Q=Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))||void 0===Q?void 0:Q.toString())})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"Biaya Layanan",variant:"outlined",size:"small",sx:{mt:4},InputProps:{startAdornment:(0,L.jsx)(_.Z,{position:"start",children:"IDR"})},disabled:!0,onChange:function(t){return(0,U.r)("fee",t,Qe,$e,en,zt)},value:(0,F.j7)(null===Qe||void 0===Qe?void 0:Qe.fee)})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(x.Z,{label:"Total Tagihan",variant:"outlined",size:"small",sx:{mt:4},InputProps:{startAdornment:(0,L.jsx)(_.Z,{position:"start",children:"IDR"})},disabled:!0,value:(0,F.j7)((null===Te||void 0===Te?void 0:Te.reduce((function(t,e){return parseInt(t)+parseInt(null===e||void 0===e?void 0:e.product_price)*parseInt(null===e||void 0===e?void 0:e.product_qty)}),0))+parseInt(null===Qe||void 0===Qe?void 0:Qe.fee))})})]})}),(0,L.jsx)(J.Z,{titleModal:"Detail Pembayaran",openModal:Lt,setOpenModal:Bt,children:(0,L.jsx)(z.Z,{alignItems:"center",justify:"center",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:(0,L.jsxs)(z.Z,{style:{width:550,textAlign:"center"},children:[(0,L.jsx)(z.Z,{children:(0,L.jsx)(k.Z,{children:(0,L.jsxs)("h3",{children:["IDR ",(0,F.j7)(null!==($=null===ye||void 0===ye||null===(X=ye.res)||void 0===X||null===(Y=X.data)||void 0===Y?void 0:Y.total_bayar)&&void 0!==$?$:bt)]})})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(k.Z,{children:"Berlaku dalam 10 Menit"})}),(0,L.jsx)(z.Z,{children:(0,L.jsxs)(k.Z,{children:["Metode Pembayaran :"," ",null!==(tt=null===(et=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()})[0])||void 0===et?void 0:et.payment_method_name)&&void 0!==tt?tt:"QRIS"]})}),(0,L.jsx)(z.Z,{children:18==parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)||19==parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)?(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("img",{src:"".concat("http://localhost:8080","/").concat(null===ye||void 0===ye?void 0:ye.image_src)})}):parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>=11&&parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)<=17||parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>=20&&parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)<=23||parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>=35&&parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)<=37?(0,L.jsx)(L.Fragment,{children:(0,L.jsx)("a",{href:null!==(nt=null!==(it=null===ye||void 0===ye||null===(rt=ye.res)||void 0===rt||null===(ot=rt.data)||void 0===ot?void 0:ot.ovo_push)&&void 0!==it?it:null===ye||void 0===ye||null===(at=ye.res)||void 0===at||null===(lt=at.data)||void 0===lt?void 0:lt.checkout_url)&&void 0!==nt?nt:null===ye||void 0===ye||null===(ut=ye.res)||void 0===ut||null===(dt=ut.data)||void 0===dt?void 0:dt.pay_url,target:"_blank",children:(0,L.jsxs)(p.Z,{variant:"contained",size:"small",sx:{m:3},children:["Bayar"," ",null===(ct=(0,E.filter)(xe,{id_payment_method:null===Qe||void 0===Qe?void 0:Qe.id_payment_method.toString()})[0])||void 0===ct?void 0:ct.payment_method_name]})})}):parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)>=1&&parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)<=10?(0,L.jsx)(L.Fragment,{children:(0,L.jsxs)(k.Z,{children:["Nomor Rekening Tujuan :",(0,L.jsx)("br",{}),(0,L.jsx)("b",{children:(0,F.Qn)(4===parseInt(null===Qe||void 0===Qe?void 0:Qe.id_payment_method)?"70017"+(null===ye||void 0===ye||null===(st=ye.res)||void 0===st||null===(vt=st.data)||void 0===vt?void 0:vt.nomor_va):""+(null===ye||void 0===ye||null===(pt=ye.res)||void 0===pt||null===(ht=pt.data)||void 0===ht?void 0:ht.nomor_va))})]})}):(0,L.jsx)(L.Fragment,{children:(0,L.jsx)(k.Z,{children:"Mohon bayar tunai sesuai tagihan."})})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(k.Z,{children:(0,L.jsx)(h.Z,{children:"Status Pembayaran"})})}),(0,L.jsxs)(z.Z,{sx:{position:"relative"},children:[(0,L.jsx)(p.Z,{variant:"contained",size:"small",sx:{m:3},disabled:St,onClick:function(){return kt(!0)},children:St?"Dalam Pengecekan":"Cek Status Pembayaran"}),St&&(0,L.jsx)(y.Z,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(k.Z,{children:(0,L.jsx)(h.Z,{children:"atau"})})}),(0,L.jsx)(z.Z,{children:(0,L.jsx)(p.Z,{variant:"contained",size:"small",color:"warning",sx:{m:3},onClick:function(){var t;return bn(null===ye||void 0===ye||null===(t=ye.req)||void 0===t?void 0:t.reff_id)},children:"Kirim Ulang Tagihan (WA/Email)"})})]})})}),(0,L.jsx)(J.Z,{titleModal:"Peringatan",openModal:Vt,setOpenModal:Gt,children:(0,L.jsx)(z.Z,{alignItems:"center",justify:"center",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:(0,L.jsx)(z.Z,{style:{width:550,paddingBottom:15,textAlign:"center"},children:(0,L.jsxs)(k.Z,{children:[(0,L.jsxs)("h3",{children:["Saldo Anda IDR ",(0,F.j7)(ke)]}),(0,L.jsxs)("h5",{children:["Minimal saldo penggunaan Menu Kasir adalah IDR ",(0,F.j7)(1e4)]}),(0,L.jsx)(p.Z,{variant:"contained",onClick:function(){return Le.push("/dompet-digital")},children:"Deposit Saldo"})]})})})}),(0,L.jsx)(J.Z,{titleModal:"Notifikasi",openModal:$t,setOpenModal:Xt,children:(0,L.jsx)(z.Z,{alignItems:"center",justify:"center",style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:(0,L.jsxs)(z.Z,{style:{width:550,paddingBottom:15,textAlign:"center"},children:[(0,L.jsxs)(k.Z,{children:["Transaksi ",(0,L.jsx)("b",{children:null===ye||void 0===ye||null===(mt=ye.req)||void 0===mt?void 0:mt.reff_id})]}),(0,L.jsx)(k.Z,{children:"telah dibayar"}),null!==ye&&void 0!==ye&&null!==(ft=ye.res)&&void 0!==ft&&null!==(xt=ft.data)&&void 0!==xt&&xt.total_bayar?(0,L.jsxs)(k.Z,{variant:"h5",children:["IDR ",(0,F.j7)(null===ye||void 0===ye||null===(_t=ye.res)||void 0===_t||null===(gt=_t.data)||void 0===gt?void 0:gt.total_bayar)]}):(0,L.jsx)(k.Z,{variant:"h5",children:"Dengan uang tunai."})]})})}),(0,L.jsx)(j.Z,{sx:{color:"#fff",zIndex:function(t){return t.zIndex.drawer+999999}},open:Ot,children:(0,L.jsx)(y.Z,{size:100,variant:"indeterminate"})}),(0,L.jsx)(m.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:null===Ye||void 0===Ye?void 0:Ye.open,autoHideDuration:6e3,onClose:function(){return tn({open:!1,type:null===Ye||void 0===Ye?void 0:Ye.type,message:""})},children:(0,L.jsx)(f.Z,{variant:"filled",severity:null===Ye||void 0===Ye?void 0:Ye.type,sx:{width:"100%"},children:null===Ye||void 0===Ye?void 0:Ye.message})})]})}},20:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pembayaran",function(){return n(76113)}])},83789:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var i=n(56586);var r=n(16988);function o(t){return function(t){if(Array.isArray(t))return(0,i.Z)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,r.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(t){t.O(0,[3662,5725,2259,810,4511,8240,4563,1034,6110,6310,7562,9667,5993,9774,2888,179],(function(){return e=20,t(t.s=e);var e}));var e=t.O();_N_E=e}]);