!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="b8656655-bf5c-42d4-af26-c0203b3ce08e",e._sentryDebugIdIdentifier="sentry-dbid-b8656655-bf5c-42d4-af26-c0203b3ce08e")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2473],{20876:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return n(79181)}])},79181:function(e,a,n){"use strict";n.r(a);var i=n(85893),l=n(67294),s=n(41664),t=n.n(s),o=n(11163),r=n(81354),d=n.n(r),u=n(52628),c=n.n(u),m=n(30158),h=n(34853),p=n(58971),v=n.n(p),x=n(16310),g=n(23241),j=n(98115),w=n(2833),y=n(13425),f=n(16268),k=n(34934),Z=n(80888),_=n(91093),b=n(14440),P=n(98163),S=n(73821),C=n(19203),O=n(80646),T=n(6799),A=n(86374),E=n(33367),K=n(22021),I=n(14e3),M=n(94246),W=n(89262),N=n(49360),D=n(19607),L=n(58811),z=n(35454),U=n(88881),F=n(28329);let q=(0,W.ZP)(S.Z)(e=>{let{theme:a}=e;return{[a.breakpoints.up("sm")]:{width:"28rem"}}}),B=(0,W.ZP)("a")(e=>{let{theme:a}=e;return{fontSize:"0.875rem",textDecoration:"none",color:a.palette.primary.main}}),H=(0,W.ZP)(A.Z)(e=>{let{theme:a}=e;return{"& .MuiFormControlLabel-label":{fontSize:"0.875rem",color:a.palette.text.secondary}}}),R=()=>{let e=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!?"'@#\$%\^&\*.,])(?=.{8,})/,a=x.Ry().shape({email:x.Z_().email().required(),password:x.Z_().matches(e,"Min 8 Chars, Uppercase, Lowercase, Number and Special Character").required()}),n=x.Ry().shape({merchant_wa:x.Rx().required(),email:x.Z_().email().required(),password:x.Z_().matches(e,"Min 8 Chars, Uppercase, Lowercase, Number and Special Character").required()}),[s,r]=(0,l.useState)(0),[u,p]=(0,l.useState)(!1),[S,A]=(0,l.useState)(!1),[W,U]=(0,l.useState)({}),[R,J]=(0,l.useState)({}),[X,G]=(0,l.useState)(0),[Q,V]=(0,l.useState)(!1),[Y,$]=(0,l.useState)(!1),[ee,ea]=(0,l.useState)(!1),[en,ei]=(0,l.useState)(!1),[el,es]=(0,l.useState)(""),[et,eo]=(0,l.useState)(""),[er,ed]=(0,l.useState)(!1),[eu,ec]=(0,l.useState)(!1),[em,eh]=(0,l.useState)(!1),[ep,ev]=(0,l.useState)(1),[ex,eg]=(0,l.useState)(""),[ej,ew]=(0,l.useState)(!1),[ey,ef]=(0,l.useState)({open:!1,type:"primary",message:""}),[ek,eZ]=(0,l.useState)({email:"",password:"",showPassword:!1}),[e_,eb]=(0,l.useState)({merchant_wa:"",email:"",password:"",token:"",showPassword:!1});(0,N.Z)();let eP=(0,o.useRouter)(),eS=async()=>{var e;let a="/auth/check_auth",n=await (0,j.Hl)(a);fetch("".concat("https://be.digipayid.com").concat(a),{method:"POST",headers:{"x-signature":null==n?void 0:n.signature,"x-timestamp":null==n?void 0:n.timestamp},body:JSON.stringify({email:null===(e=JSON.parse(localStorage.getItem("data-module")))||void 0===e?void 0:e.email})}).then(e=>e.json()).then(e=>{var a,n;(null==e?void 0:null===(a=e.auth)||void 0===a?void 0:a.user)&&(null==e?void 0:null===(n=e.auth)||void 0===n?void 0:n.token)&&eP.push("/")}).catch(()=>!1)};(0,l.useLayoutEffect)(()=>{eS()},[]),(0,l.useEffect)(()=>{(0,y.r)("email","",ek,eZ,a,U)},[]);let eC=async e=>{if(ed(!0),c()(W).map(e=>{if(e){ef({open:!0,type:"error",message:"Error"==c()(W)[0]?"Fill all required fields!":c()(W)[0]}),ed(!1);return}}),!u)return ef({open:!0,type:"error",message:"Captcha is required!"}),ed(!1),!1;if(X<.5)return ef({open:!0,type:"error",message:"High risk action detected!"}),ed(!1),!1;{var n,i,l,s,t,o,m,h,p,v,x;let u=await (0,w.Hp)(e,a,ek).catch(()=>ed(!1));if(1>parseInt(null==u?void 0:null===(n=u.data)||void 0===n?void 0:n.is_verified))return ed(!1),V(!0),!1;if(ef({open:!0,type:(null==u?void 0:u.code)>0?"error":"primary",message:(null==u?void 0:u.code)>0?null==u?void 0:u.error:null==u?void 0:u.message}),ed(!1),(null==u?void 0:u.code)<1){eh({username:null==u?void 0:null===(i=u.data)||void 0===i?void 0:i.username,email:null==u?void 0:null===(l=u.data)||void 0===l?void 0:l.email,merchant_name:null==u?void 0:null===(s=u.data)||void 0===s?void 0:s.merchant_name,merchant_wa:null==u?void 0:null===(t=u.data)||void 0===t?void 0:t.merchant_wa,merchant_address:null==u?void 0:null===(o=u.data)||void 0===o?void 0:o.merchant_address,username:null==u?void 0:null===(m=u.data)||void 0===m?void 0:m.username,user_privilege_name:null==u?void 0:null===(h=u.data)||void 0===h?void 0:h.user_privilege_name});let e=null==u?void 0:null===(p=u.data)||void 0===p?void 0:p.user_role,a="/auth/set_storage",n=await (0,j.Hl)(a);fetch("".concat("https://be.digipayid.com").concat(a),{method:"POST",headers:{"x-signature":null==n?void 0:n.signature,"x-timestamp":null==n?void 0:n.timestamp},body:JSON.stringify({key:null==u?void 0:null===(v=u.data)||void 0===v?void 0:v.email,val:{user:d().AES.encrypt("".concat(JSON.stringify(null==u?void 0:u.data)),"".concat("digipay10D3w@")).toString(),token:d().AES.encrypt("".concat(JSON.stringify(null==u?void 0:null===(x=u.data)||void 0===x?void 0:x.token_login)),"".concat("digipay10D3w@")).toString()}})}).then(e=>e.json()).then(a=>{r(60),ea(!0),parseInt(e)>1?ec("user"):ec("admin")}).catch(()=>ed(!1))}return!1}},eO=async e=>{ed(!0);let a={type:"otp_login",merchant_wa:em.merchant_wa,email:em.email,otp_wa:et},n=await (0,w.up)(a).catch(()=>ed(!1));ef({open:!0,type:(null==n?void 0:n.code)<1?"primary":"error",message:(null==n?void 0:n.code)<1?null==n?void 0:n.message:"Kode OTP tidak valid !"}),ed(!1),(null==n?void 0:n.code)<1&&(es(""),eo(""),ea(!1),eh({}),v().set("data-module",em),eu&&"user"==eu?(v().set("module","user"),setTimeout(()=>eP.push("/"),100)):eu&&"admin"==eu&&(v().set("module","admin"),setTimeout(()=>eP.push("/admin"),100)),ec(!1))},eT=async e=>{ed(!0);let a={};"email"==e?a={type:"register_otp_email",email:em.email,otp_email:el}:"wa"==e&&(a={type:"register_otp_wa",merchant_wa:em.merchant_wa,email:em.email,otp_wa:et});let n=await (0,w.up)(a).catch(()=>ed(!1));ef({open:!0,type:(null==n?void 0:n.code)>0?"error":"primary",message:(null==n?void 0:n.code)>0?null==n?void 0:n.error:null==n?void 0:n.message}),ed(!1),(null==n?void 0:n.code)<1&&(es(""),eo(""),"email"==e?(V(!1),$(!0)):(V(!1),$(!1),eP.push("/")))},eA=async e=>{r(60),ed(!0);let a={};"email"==e?a={type:"register_otp_email",email:em.email}:"wa"==e?a={type:"register_otp_wa",merchant_wa:em.merchant_wa,email:em.email}:"login_email"==e?a={type:"otp_login_email",email:em.email}:"login_wa"==e&&(a={type:"otp_login_wa",merchant_wa:em.merchant_wa,email:em.email});let n=await (0,w.DH)(a).catch(()=>ed(!1));ef({open:!0,type:(null==n?void 0:n.code)>0?"error":"primary",message:(null==n?void 0:n.code)>0?null==n?void 0:n.error:null==n?void 0:n.message}),ed(!1)},eE=async e=>{ed(!0);let a={email:null==e_?void 0:e_.email,merchant_wa:null==e_?void 0:e_.merchant_wa},n=await (0,w.py)(a).catch(()=>ed(!1));1>parseInt(null==n?void 0:n.code)&&ev(2),ef({open:!0,type:(null==n?void 0:n.code)>0?"error":"primary",message:(null==n?void 0:n.code)>0?null==n?void 0:n.error:null==n?void 0:n.message}),r(60),ed(!1)},eK=async e=>{ed(!0);let a=await (0,w.h4)({otp_email:el,otp_wa:et}).catch(()=>ed(!1));1>parseInt(null==a?void 0:a.code)&&((0,y.r)("token",null==a?void 0:a.token,e_,eb,n,J),ev(3)),ef({open:!0,type:(null==a?void 0:a.code)>0?"error":"primary",message:(null==a?void 0:a.code)>0?null==a?void 0:a.error:null==a?void 0:a.message}),ed(!1)},eI=async e=>{ed(!0);let a={token_login:null==e_?void 0:e_.token,password:null==e_?void 0:e_.password},n=await (0,w.sm)(a).catch(()=>ed(!1));1>parseInt(null==n?void 0:n.code)&&1>parseInt(null==n?void 0:n.code)&&ev(4),eb({merchant_wa:"",email:"",password:"",token:"",showPassword:!1}),ef({open:!0,type:(null==n?void 0:n.code)>0?"error":"primary",message:(null==n?void 0:n.code)>0?null==n?void 0:n.error:null==n?void 0:n.message}),ed(!1)};return(0,l.useEffect)(()=>{fetch("https://recaptchaenterprise.googleapis.com/v1/projects/telp-304809/assessments?key=".concat("AIzaSyAkYIUIohTKbGl6cNzgfhP50tzaFd74gK0"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({event:{token:u,expectedAction:"USER_ACTION",siteKey:"6LdDoq4nAAAAAMEthi6CA1Xj-N0sLQCxGya6xcT3"}})}).then(e=>e.json()).then(async e=>{var a;G(null==e?void 0:null===(a=e.riskAnalysis)||void 0===a?void 0:a.score)})},[u]),(0,l.useEffect)(()=>{s>0&&setTimeout(()=>r(s-1),1e3)},[s]),(0,l.useEffect)(()=>{en||4!==ep||ev(1),es(""),eo("")},[en,Y,Q,ep]),(0,i.jsxs)(b.Z,{className:"content-center",children:[(0,i.jsx)(q,{sx:{zIndex:1},children:(0,i.jsxs)(C.Z,{sx:{padding:e=>"".concat(e.spacing(12,9,7)," !important")},children:[(0,i.jsx)(b.Z,{sx:{mb:8,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)("img",{src:"/images/logo.png",width:70})}),(0,i.jsxs)(b.Z,{sx:{mb:6},children:[(0,i.jsxs)(M.Z,{variant:"h5",sx:{fontWeight:600,marginBottom:1.5},children:["Selamat Datang di ",z.Z.templateName," \uD83D\uDC4B\uD83C\uDFFB"]}),(0,i.jsx)(M.Z,{variant:"body2",children:"Silakan Login dan rasakan pengalaman kemudahannya."})]}),(0,i.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>e.preventDefault(),children:[(0,i.jsx)(I.Z,{autoFocus:!0,fullWidth:!0,id:"standard-basic",label:"Email",variant:"outlined",size:"medium",onChange:e=>(0,y.r)("email",e,ek,eZ,a,U),value:null==ek?void 0:ek.email,error:null==W?void 0:W.email,helperText:null==W?void 0:W.email,sx:{mb:4}}),(0,i.jsx)(T.Z,{fullWidth:!0,children:(0,i.jsx)(I.Z,{fullWidth:!0,id:"standard-basic",label:"Password",variant:"outlined",size:"medium",onChange:e=>(0,y.r)("password",e,ek,eZ,a,U),value:null==ek?void 0:ek.password,error:null==W?void 0:W.password,helperText:null==W?void 0:W.password,type:S?"text":"password",InputProps:{endAdornment:(0,i.jsx)(K.Z,{position:"end",children:(0,i.jsx)(E.Z,{edge:"end",onClick:()=>A(!S),"aria-label":"toggle password visibility",children:S?(0,i.jsx)(L.Z,{}):(0,i.jsx)(D.Z,{})})})}})}),(0,i.jsx)(b.Z,{sx:{mb:4,mt:4,display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:(0,i.jsx)(h.Z,{sitekey:"6LdDoq4nAAAAAMEthi6CA1Xj-N0sLQCxGya6xcT3",onChange:e=>p(e)})}),(0,i.jsxs)(b.Z,{sx:{mb:4,display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between"},children:[(0,i.jsx)(H,{control:(0,i.jsx)(O.Z,{checked:!0}),label:"Ingat sesi login"}),(0,i.jsx)(B,{onClick:e=>ei(!0),sx:{cursor:"pointer"},children:"Lupa Password?"})]}),(0,i.jsx)(P.Z,{fullWidth:!0,disabled:!u||Object.keys(W).length>0,size:"large",variant:"contained",sx:{marginBottom:7},onClick:e=>eC(e),children:"Login"}),(0,i.jsxs)(b.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[(0,i.jsx)(M.Z,{variant:"body2",sx:{marginRight:2},children:"Belum punya akun?"}),(0,i.jsx)(M.Z,{variant:"body2",children:(0,i.jsx)(t(),{passHref:!0,href:"/auth/register",children:(0,i.jsx)(B,{children:"Register Akun"})})})]})]})]})}),(0,i.jsx)(F.Z,{}),(0,i.jsx)(f.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+999999},open:er,children:(0,i.jsx)(k.Z,{color:"primary",size:100,variant:"indeterminate"})}),(0,i.jsx)(Z.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:null==ey?void 0:ey.open,autoHideDuration:3e3,onClose:()=>ef({open:!1,type:null==ey?void 0:ey.type,message:""}),children:(0,i.jsx)(_.Z,{variant:"filled",severity:null==ey?void 0:ey.type,sx:{width:"100%"},children:null==ey?void 0:ey.message})}),(0,i.jsxs)(g.Z,{titleModal:"Konfirmasi OTP Email",openModal:Q,setOpenModal:V,handleSubmitFunction:()=>eT("email"),children:[(0,i.jsxs)(M.Z,{children:["Kode OTP Email anda sudah dikirim ke Email anda ",null==ek?void 0:ek.email,"."]}),(0,i.jsx)(M.Z,{children:"Silahkan konfirmasikan dengan memasukkan kode OTP Melalui Email."}),(0,i.jsx)(b.Z,{sx:{p:10},children:(0,i.jsx)(m.P,{length:6,value:el,onChange:e=>es(e)})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(M.Z,{variant:"body2",children:0==s?(0,i.jsx)(B,{onClick:e=>eA("email"),children:"Kirim Ulang Kode OTP"}):(0,i.jsxs)(B,{disabled:!0,sx:{color:"gray"},children:["Kirim Ulang Kode OTP dalam (",s,")"]})})})]}),(0,i.jsxs)(g.Z,{titleModal:"Konfirmasi OTP WhatsApp",openModal:Y,setOpenModal:$,handleSubmitFunction:()=>eT("wa"),children:[(0,i.jsxs)(M.Z,{children:["Kode OTP Email anda sudah dikirim ke WhatsApp anda ",null==ek?void 0:ek.merchant_wa,"."]}),(0,i.jsx)(M.Z,{children:"Silahkan konfirmasikan dengan memasukkan kode OTP Melalui WhatsApp."}),(0,i.jsx)(b.Z,{sx:{p:10},children:(0,i.jsx)(m.P,{length:6,value:et,onChange:e=>eo(e)})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(M.Z,{variant:"body2",children:0==s?(0,i.jsx)(B,{onClick:e=>eA("wa"),children:"Kirim Ulang Kode OTP"}):(0,i.jsxs)(B,{disabled:!0,sx:{color:"gray"},children:["Kirim Ulang Kode OTP dalam (",s,")"]})})})]}),(0,i.jsxs)(g.Z,{titleModal:"Lupa Password",openModal:en,setOpenModal:ei,ButtonDialogs:1===ep?(0,i.jsx)(P.Z,{disabled:(null==R?void 0:R.merchant_wa)||(null==R?void 0:R.email)||!(null==e_?void 0:e_.merchant_wa)||!(null==e_?void 0:e_.email),variant:"contained",sx:{m:3},onClick:eE,children:"Lanjut"}):2===ep?(0,i.jsx)(P.Z,{disabled:!el||!et,variant:"contained",sx:{m:3},onClick:eK,children:"Lanjut"}):3===ep?(0,i.jsx)(P.Z,{disabled:(null==R?void 0:R.token)||(null==R?void 0:R.password)||!(null==e_?void 0:e_.password),variant:"contained",sx:{m:3},onClick:eI,children:"Submit"}):void 0,children:[1===ep&&(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(M.Z,{children:"Masukkan Email Untuk Pembaharuan Password."}),(0,i.jsx)(I.Z,{fullWidth:!0,type:"email",label:"Email",sx:{marginBottom:4,mt:4},onChange:e=>(0,y.r)("email",e,e_,eb,n,J),value:null==e_?void 0:e_.email,error:null==R?void 0:R.email,helperText:null==R?void 0:R.email}),(0,i.jsx)(M.Z,{children:"Masukkan No. WhatsApp Untuk Pembaharuan Password."}),(0,i.jsx)(I.Z,{autoFocus:!0,fullWidth:!0,id:"merchant_wa",label:"No. Whatsapp",sx:{marginBottom:4,mt:4},onChange:e=>(0,y.r)("merchant_wa",e,e_,eb,n,J),value:null==e_?void 0:e_.merchant_wa,error:null==R?void 0:R.merchant_wa,helperText:null==R?void 0:R.merchant_wa})]}),2===ep&&(0,i.jsxs)(b.Z,{children:[(0,i.jsxs)(M.Z,{children:["Kode OTP Email anda sudah dikirim ke Email & WhatsApp anda ",null==ek?void 0:ek.merchant_wa,"."]}),(0,i.jsx)(M.Z,{children:"Silahkan konfirmasikan dengan memasukkan kode OTP Melalui Email & WhatsApp."}),(0,i.jsxs)(b.Z,{sx:{p:10},children:[(0,i.jsx)(M.Z,{children:"Masukkan OTP Email"}),(0,i.jsx)(m.P,{length:6,value:el,onChange:e=>es(e)})]}),(0,i.jsxs)(b.Z,{sx:{p:10},children:[(0,i.jsx)(M.Z,{children:"Masukkan OTP WhatsApp"}),(0,i.jsx)(m.P,{length:6,value:et,onChange:e=>eo(e)})]}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(M.Z,{variant:"body2",children:0==s?(0,i.jsx)(B,{onClick:eE,sx:{cursor:"pointer"},children:"Kirim Ulang Kode OTP"}):(0,i.jsxs)(B,{disabled:!0,sx:{color:"gray"},children:["Kirim Ulang Kode OTP dalam (",s,")"]})})})]}),3===ep&&(0,i.jsxs)(b.Z,{children:[(0,i.jsx)(M.Z,{children:"Silahkan masukkan password baru anda."}),(0,i.jsx)(b.Z,{sx:{p:10},children:(0,i.jsx)(T.Z,{fullWidth:!0,children:(0,i.jsx)(I.Z,{fullWidth:!0,id:"standard-basic",label:"Password",variant:"outlined",size:"medium",onChange:e=>(0,y.r)("password",e,e_,eb,n,J),value:null==e_?void 0:e_.password,error:null==R?void 0:R.password,helperText:null==R?void 0:R.password,type:(null==e_?void 0:e_.showPassword)?"text":"password",InputProps:{endAdornment:(0,i.jsx)(K.Z,{position:"end",children:(0,i.jsx)(E.Z,{edge:"end",onClick:()=>(0,y.r)("showPassword",!(null==e_?void 0:e_.showPassword),e_,eb,n,J),"aria-label":"toggle password visibility",children:(null==e_?void 0:e_.showPassword)?(0,i.jsx)(L.Z,{}):(0,i.jsx)(D.Z,{})})})}})})})]}),4===ep&&(0,i.jsx)(b.Z,{children:(0,i.jsx)(M.Z,{children:"Password anda telah berhasil diperbaharui."})})]}),(0,i.jsxs)(g.Z,{titleModal:"Konfirmasi OTP Login",openModal:ee,setOpenModal:ea,handleSubmitFunction:()=>eO("otp_login"),children:[(0,i.jsxs)(M.Z,{children:["Kode OTP Login anda sudah dikirim",(0,i.jsx)("br",{}),"ke Email & WhatsApp anda ",null==ek?void 0:ek.merchant_wa,"."]}),(0,i.jsx)(M.Z,{children:"Silakan masukkan kode OTP."}),(0,i.jsx)(b.Z,{sx:{p:10},children:(0,i.jsx)(m.P,{length:6,value:et,onChange:e=>eo(e)})}),(0,i.jsx)(b.Z,{children:(0,i.jsx)(M.Z,{variant:"body2",children:0==s?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B,{onClick:e=>eA("login_wa"),children:"Kirim Ulang Kode OTP Melalui WhatsApp"}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(B,{onClick:e=>eA("login_email"),children:"Kirim Ulang Kode OTP Melalui Email"})]}):(0,i.jsxs)(B,{disabled:!0,sx:{color:"gray"},children:["Kirim Ulang Kode OTP dalam (",s,")"]})})})]})]})};R.getLayout=e=>(0,i.jsx)(U.Z,{children:e}),a.default=R}},function(e){e.O(0,[3003,9663,6058,5595,6310,8709,5285,8617,2888,9774,179],function(){return e(e.s=20876)}),_N_E=e.O()}]);